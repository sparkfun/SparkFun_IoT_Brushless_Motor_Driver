
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A hookup guide for the IoT BLDC Motor Driver">
      
      
        <meta name="author" content="SparkFun Electronics">
      
      
        <link rel="canonical" href="https://sparkfun.github.io/SparkFun_IoT_Brushless_Motor_Driver/print_view/">
      
      
      
      
        
      
      
      <link rel="icon" href="../img/sfe_logo_sq.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4+insiders-4.42.1">
    
    
      
        <title>Introduction - Hookup Guide - SparkFun IoT Brushless Motor Driver</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cbde490e.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.307 5.476c-.756.134-1.975-.615-2.59-1.362-.755-.922-.66-1.647-.071-2.29.883-.978 2.396-.6 2.396-.6s-2.772-2.432-5.658-.44c-2.571 1.77-1.833 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.443-.184-2.034-1.343-1.687-2.054.298-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044c-1.259.474-2.297 1.515-2.214 4.12V24s1.301-1.604 2.83-3.236c1.714-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.371-3.645 3.141-4.563.67-9.68-1.43-10.343 0 0 .34 1.438-.745 1.638z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');--md-admonition-icon--github:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>');--md-admonition-icon--arduino:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.087 6.146c-.3 0-.607.017-.907.069-2.532.367-4.23 2.239-5.18 3.674-.95-1.435-2.648-3.307-5.18-3.674a6.49 6.49 0 0 0-.907-.069C2.648 6.146 0 8.77 0 12s2.656 5.854 5.913 5.854c.3 0 .607-.017.916-.069 2.531-.376 4.23-2.247 5.18-3.683.949 1.436 2.647 3.307 5.18 3.683.299.043.607.069.915.069C21.344 17.854 24 15.23 24 12s-2.656-5.854-5.913-5.854zM6.53 15.734a3.837 3.837 0 0 1-.625.043c-2.148 0-3.889-1.7-3.889-3.777 0-2.085 1.749-3.777 3.898-3.777.208 0 .416.017.624.043 2.39.35 3.847 2.768 4.347 3.734-.508.974-1.974 3.384-4.355 3.734zm11.558.043c-.208 0-.416-.017-.624-.043-2.39-.35-3.856-2.768-4.347-3.734.491-.966 1.957-3.384 4.347-3.734.208-.026.416-.043.624-.043 2.149 0 3.89 1.7 3.89 3.777 0 2.085-1.75 3.777-3.89 3.777zm1.65-4.404v1.134h-1.205v1.182h-1.156v-1.182H16.17v-1.134h1.206V10.19h1.156v1.183h1.206zM4.246 12.498H7.82v-1.125H4.245v1.125z"/></svg>');--md-admonition-icon--python:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>');--md-admonition-icon--code:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zm96-34c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg>');--md-admonition-icon--terminal:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25Zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25ZM7.25 8a.749.749 0 0 1-.22.53l-2.25 2.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L5.44 8 3.72 6.28a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l2.25 2.25c.141.14.22.331.22.53Zm1.5 1.5h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5Z"/></svg>');--md-admonition-icon--serial:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h176l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32h256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-69.3L336 416h176c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64zm448 64v288H64V64h448z"/></svg>');--md-admonition-icon--hot:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.66 11.2c-.23-.3-.51-.56-.77-.82-.67-.6-1.43-1.03-2.07-1.66C11.33 7.26 11 4.85 11.95 3c-.95.23-1.78.75-2.49 1.32-2.59 2.08-3.61 5.75-2.39 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C3.78 10 2.87 12.3 3 14.47c.06.5.12 1 .29 1.5.14.6.41 1.2.71 1.73 1.08 1.73 2.95 2.97 4.96 3.22 2.14.27 4.43-.12 6.07-1.6 1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6-1.12.4-2.24-.16-2.9-.82 1.19-.28 1.9-1.16 2.11-2.05.17-.8-.15-1.46-.28-2.23-.12-.74-.1-1.37.17-2.06.19.38.39.76.63 1.06.77 1 1.98 1.44 2.24 2.8.04.14.06.28.06.43.03.82-.33 1.72-.93 2.27M21 13h-2V7h2v6m0 4h-2v-2h2v2Z"/></svg>');--md-admonition-icon--link:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheet/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine base classes -->


  


<!-- Header -->
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav
	class="md-header__inner md-grid"
	aria-label="Header"
  >

	<!-- Link to home -->
	<!-- <a
	  href="https://www.sparkfun.com"
	  title="Hookup Guide - SparkFun IoT Brushless Motor Driver"
	  class="md-header__button md-logo"
	  aria-label="Hookup Guide - SparkFun IoT Brushless Motor Driver"
	  data-md-component="logo"
	>
	  
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

	</a> -->
	<a
	  href="https://www.sparkfun.com"
	  title="sparkfun.com"
	  class="md-header__button md-logo"
	  aria-label="Hookup Guide - SparkFun IoT Brushless Motor Driver"
	  data-md-component="logo"
	>
	  
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

	</a>

	<!-- Button to open drawer -->
	<label class="md-header__button md-icon" for="__drawer">
	  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
	</label>

	<!-- Header title -->
	<div class="md-header__title" data-md-component="header-title">
	  <div class="md-header__ellipsis">
		<div class="md-header__topic">
		  <span class="md-ellipsis">
			Hookup Guide - SparkFun IoT Brushless Motor Driver
		  </span>
		</div>
		<div class="md-header__topic" data-md-component="header-topic">
		  <span class="md-ellipsis">
			
			  Introduction
			
		  </span>
		</div>
	  </div>
	</div>

	<!-- Color palette -->
	
	  <form class="md-header__option" data-md-component="palette">
		
		  
		  <input
			class="md-option"
			data-md-color-media="(prefers-color-scheme)"
			data-md-color-scheme="default"
			data-md-color-primary="grey"
			data-md-color-accent="red"
			
			  aria-label="Switch to dark mode"
			
			type="radio"
			name="__palette"
			id="__palette_1"
		  />
		  
			<label
			  class="md-header__button md-icon"
			  title="Switch to dark mode"
			  for="__palette_3"
			  hidden
			>
			  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
			</label>
		  
		
		  
		  <input
			class="md-option"
			data-md-color-media="(prefers-color-scheme: light)"
			data-md-color-scheme="default"
			data-md-color-primary="grey"
			data-md-color-accent="red"
			
			  aria-label="Switch to system preference"
			
			type="radio"
			name="__palette"
			id="__palette_2"
		  />
		  
			<label
			  class="md-header__button md-icon"
			  title="Switch to system preference"
			  for="__palette_1"
			  hidden
			>
			  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
			</label>
		  
		
		  
		  <input
			class="md-option"
			data-md-color-media="(prefers-color-scheme: dark)"
			data-md-color-scheme="slate"
			data-md-color-primary="grey"
			data-md-color-accent="red"
			
			  aria-label="Switch to light mode"
			
			type="radio"
			name="__palette"
			id="__palette_3"
		  />
		  
			<label
			  class="md-header__button md-icon"
			  title="Switch to light mode"
			  for="__palette_2"
			  hidden
			>
			  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
			</label>
		  
		
	  </form>
	

	<!-- Site language selector -->
	

	<!-- Button to open search modal -->
	
	  <label class="md-header__button md-icon" for="__search">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
	  </label>

	  <!-- Search interface -->
	  <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
	

	<!-- Repository information -->
	
	  <div class="md-header__source">
		<a href="https://github.com/sparkfun/SparkFun_IoT_Brushless_Motor_Driver" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    sparkfun/SparkFun_IoT_Brushless_Motor_Driver
  </div>
</a>
	  </div>
	
  </nav>

  <!-- Navigation tabs (sticky) -->
  
	
	  <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Navigation tabs -->
<nav
  class="md-tabs"
  aria-label="Tabs"
  data-md-component="tabs"
>
  <div class="md-tabs__inner md-grid">

	<!-- Adds tab on right side of header -->
	
	<ul class="md-tabs__list" style="float: right;">
	  <li class="md-tabs__item">
		<a href="/SparkFun_IoT_Brushless_Motor_Driver/print_view/" class="md-tabs__link">
		  🖨️ Print View
		<!-- &nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.5 14.33c.79 0 1.63.08 2.5.24v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.33-4.5.99v-1.69c1.17-.53 2.67-.8 4.5-.8M13 12.46c1.29-.53 2.79-.79 4.5-.79.79 0 1.63.07 2.5.23v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.34-4.5.99m4.5-3.65c-1.9 0-3.39.32-4.5 1V9.84c1.23-.56 2.73-.84 4.5-.84.79 0 1.63.08 2.5.23v1.55c-.74-.19-1.59-.28-2.5-.28m3.5 8V7c-1.04-.33-2.21-.5-3.5-.5-2.05 0-3.88.5-5.5 1.5v11.5c1.62-1 3.45-1.5 5.5-1.5 1.19 0 2.36.16 3.5.5m-3.5-14c2.35 0 4.19.5 5.5 1.5v14.56c0 .12-.05.24-.16.35-.11.09-.23.17-.34.17-.11 0-.19-.02-.25-.05-1.28-.69-2.87-1.03-4.75-1.03-2.05 0-3.88.5-5.5 1.5-1.34-1-3.17-1.5-5.5-1.5-1.66 0-3.25.36-4.75 1.07-.03.01-.07.01-.12.03-.04.01-.08.02-.13.02-.11 0-.23-.04-.34-.12a.475.475 0 0 1-.16-.35V6c1.34-1 3.18-1.5 5.5-1.5 2.33 0 4.16.5 5.5 1.5 1.34-1 3.17-1.5 5.5-1.5Z"/></svg> -->
		</a>
	  </li>
	</ul>
	

	<!-- Original tabbed sections -->
	<ul class="md-tabs__list">
	  
		
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../introduction/" class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

	  
		
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../resources/" class="md-tabs__link">
          
  
  Resources

        </a>
      </li>
    
  

	  
		
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../troubleshooting_tips/" class="md-tabs__link">
          
  
  Support

        </a>
      </li>
    
  

	  
	</ul>
  </div>
</nav>
	
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Determine base classes -->


  



<!-- Navigation -->
<nav
  class="md-nav md-nav--primary md-nav--lifted"
  aria-label="Navigation"
  data-md-level="0"
>

  <!-- Site title -->
  <!-- <label class="md-nav__title" for="__drawer">
	<a
	  href="https://www.sparkfun.com"
	  title="Hookup Guide - SparkFun IoT Brushless Motor Driver"
	  class="md-nav__button md-logo"
	  aria-label="Hookup Guide - SparkFun IoT Brushless Motor Driver"
	  data-md-component="logo"
	>
	  
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

	</a>
	Hookup Guide - SparkFun IoT Brushless Motor Driver
  </label> -->
  <label class="md-nav__title" for="__drawer">
	<a
	  href="https://www.sparkfun.com"
	  title="sparkfun.com"
	  class="md-nav__button md-logo"
	  aria-label="SparkFun"
	  data-md-component="logo"
	>
	  
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

	</a>
	Hookup Guide - SparkFun IoT Brushless Motor Driver
  </label>

  <!-- Repository information -->
  
	<div class="md-nav__source">
	  <a href="https://github.com/sparkfun/SparkFun_IoT_Brushless_Motor_Driver" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    sparkfun/SparkFun_IoT_Brushless_Motor_Driver
  </div>
</a>
	</div>
  

  <!-- Navigation list -->
  <ul class="md-nav__list" data-md-scrollfix>
	
	  
	  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5Z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_overview/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Hardware Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_assembly/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.71 20.29-1.42 1.42a1 1 0 0 1-1.41 0L7 9.85A3.81 3.81 0 0 1 6 10a4 4 0 0 1-3.78-5.3l2.54 2.54.53-.53 1.42-1.42.53-.53L4.7 2.22A4 4 0 0 1 10 6a3.81 3.81 0 0 1-.15 1l11.86 11.88a1 1 0 0 1 0 1.41M2.29 18.88a1 1 0 0 0 0 1.41l1.42 1.42a1 1 0 0 0 1.41 0l5.47-5.46-2.83-2.83M20 2l-4 2v2l-2.17 2.17 2 2L18 8h2l2-4Z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Hardware Assembly
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Software - Arduino IDE
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Software - Arduino IDE
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../software_overview/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.087 6.146c-.3 0-.607.017-.907.069-2.532.367-4.23 2.239-5.18 3.674-.95-1.435-2.648-3.307-5.18-3.674a6.49 6.49 0 0 0-.907-.069C2.648 6.146 0 8.77 0 12s2.656 5.854 5.913 5.854c.3 0 .607-.017.916-.069 2.531-.376 4.23-2.247 5.18-3.683.949 1.436 2.647 3.307 5.18 3.683.299.043.607.069.915.069C21.344 17.854 24 15.23 24 12s-2.656-5.854-5.913-5.854zM6.53 15.734a3.837 3.837 0 0 1-.625.043c-2.148 0-3.889-1.7-3.889-3.777 0-2.085 1.749-3.777 3.898-3.777.208 0 .416.017.624.043 2.39.35 3.847 2.768 4.347 3.734-.508.974-1.974 3.384-4.355 3.734zm11.558.043c-.208 0-.416-.017-.624-.043-2.39-.35-3.856-2.768-4.347-3.734.491-.966 1.957-3.384 4.347-3.734.208-.026.416-.043.624-.043 2.149 0 3.89 1.7 3.89 3.777 0 2.085-1.75 3.777-3.89 3.777zm1.65-4.404v1.134h-1.205v1.182h-1.156v-1.182H16.17v-1.134h1.206V10.19h1.156v1.183h1.206zM4.246 12.498H7.82v-1.125H4.245v1.125z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Installation & Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../example-BLDC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example - Basic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../example-factory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example - Factory Reset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

	
	  
	  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Hardware Resources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Background Information
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

	
	  
	  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    
  
    Support
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Support
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting_tips/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>
  
  <span class="md-ellipsis">
    
  
    Troubleshooting Tips
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../github/file_issue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Submit Issues
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../github/contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contribute
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

	

	<!-- Add Hard Copies to NAV menu -->
	<li class="md-nav__item">
	  <a href="/SparkFun_IoT_Brushless_Motor_Driver/print_view/" class="md-nav__link">
	  <span class="md-ellipsis">
		🖨️ Print View
		<!-- Hard Copies&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.5 14.33c.79 0 1.63.08 2.5.24v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.33-4.5.99v-1.69c1.17-.53 2.67-.8 4.5-.8M13 12.46c1.29-.53 2.79-.79 4.5-.79.79 0 1.63.07 2.5.23v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.34-4.5.99m4.5-3.65c-1.9 0-3.39.32-4.5 1V9.84c1.23-.56 2.73-.84 4.5-.84.79 0 1.63.08 2.5.23v1.55c-.74-.19-1.59-.28-2.5-.28m3.5 8V7c-1.04-.33-2.21-.5-3.5-.5-2.05 0-3.88.5-5.5 1.5v11.5c1.62-1 3.45-1.5 5.5-1.5 1.19 0 2.36.16 3.5.5m-3.5-14c2.35 0 4.19.5 5.5 1.5v14.56c0 .12-.05.24-.16.35-.11.09-.23.17-.34.17-.11 0-.19-.02-.25-.05-1.28-.69-2.87-1.03-4.75-1.03-2.05 0-3.88.5-5.5 1.5-1.34-1-3.17-1.5-5.5-1.5-1.66 0-3.25.36-4.75 1.07-.03.01-.07.01-.12.03-.04.01-.08.02-.13.02-.11 0-.23-.04-.34-.12a.475.475 0 0 1-.16-.35V6c1.34-1 3.18-1.5 5.5-1.5 2.33 0 4.16.5 5.5 1.5 1.34-1 3.17-1.5 5.5-1.5Z"/></svg> -->
	  </span>
	  </a>
	</li>
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#required-materials" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113c-9.3-9.4-9.3-24.6 0-34s24.6-9.4 33.9 0L63 101.1l55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L63 261.2l55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32h224c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32h224c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm-64 160c0-17.7 14.3-32 32-32h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"/></svg></span>&nbsp;Required Materials
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suggested-reading" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg></span>&nbsp;Suggested Reading
        </span>
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                

  




              
              <article class="md-content__inner md-typeset">
                

<!-- Adds file-eye icon to view hookup guide as a single page -->

	<a href="/SparkFun_IoT_Brushless_Motor_Driver/print_view" title="View as Single-Page" class="md-content__button md-icon">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.8 21c-.2-.4-.5-.8-.6-1.3l-.4-.7H8v-5h5c1.2-.6 2.6-1 4-1 1.9 0 3.6.6 5 1.6V11c0-1.7-1.3-3-3-3H5c-1.7 0-3 1.3-3 3v6h4v4h3.8M19 10c.6 0 1 .4 1 1s-.4 1-1 1-1-.4-1-1 .4-1 1-1m-1-3H6V3h12v4m-1 11c.6 0 1 .4 1 1s-.4 1-1 1-1-.4-1-1 .4-1 1-1m0-3c-2.7 0-5.1 1.7-6 4 .9 2.3 3.3 4 6 4s5.1-1.7 6-4c-.9-2.3-3.3-4-6-4m0 6.5c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5Z"/></svg>
	</a>



                  

  
    <a href="https://github.com/sparkfun/SparkFun_IoT_Brushless_Motor_Driver/blob/main/docs/print_view.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12h8v2H8v-2m2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4v-2m-2-2h4.1l.9-.9V16H8v2m12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link"></a></h1>
<div class="grid cards desc">
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/22132">
    <strong>IoT Brushless Motor Driver</strong><br>
    <strong>SKU:</strong> ROB-22132</p>
<hr />
<p><figure markdown>
<img alt="Product Thumbnail" src="https://cdn.sparkfun.com/assets/parts/2/1/9/9/5/22132-_01.jpg" />
</figure></a></p>
<p><center>
<article class="video_desc">
<iframe src="https://www.youtube.com/embed/4GGIxnUDrU0" title="Product Showcase: SparkFun IoT Brushless Motor Driver (ESP32 WROOM, TMC6300)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</article>
<img alt="QR code to play video" class="qr" src="../assets/img/qr_code/product_video.png" />
</center></p>
</li>
<li>
<p>The SparkFun IoT Brushless Motor Driver is an all-in-one development platform. It includes all the components to create a simple IoT device or learn about <a href="https://en.wikipedia.org/wiki/Control_system">control systems</a>. On the boaard, users will find an ESP32 microcontroller, a TMC6300 motor driver, a <a href="https://www.sparkfun.com/products/20441">gimbal motor</a>, a TMAG5273 hall-effect sensor, three INA240A1 inline current sensors, an MCP6021T low-side current sensor, two user buttons, a Qwiic connector, a 3-pin JST connector (for the gimbal motor), and a WS2812 RGB LED.</p>
<p>The TMC6300 from <a href="https://www.trinamic.com/">ADI + Trinamic</a> is a powerful and easy-to-use three-phase motor driver with up to 2A (1.4A<sub>RMS</sub>) of total drive current. Separate high-side and low-side control of the three half-bridges allows for incredible control of each phase of the <a href="https://fab.cba.mit.edu/classes/865.21/topics/power_electronics/commutation/#bldc-commutation">motor commutation</a>. We've found the <a href="https://docs.simplefoc.com/"><em>Arduino Simple Field Oriented Control</em></a> library to work well with the TMC6300 motor driver.</p>
<p>However, a field-oriented control (FOC) algorithm requires some feedback to close and optimize the control loop. Therefore, we integrated a TMAG5273 hall-effect sensor and INA240A1 current sensor amplifiers <em>(both manufactured by <a href="https://www.ti.com/">Texas Instruments</a>)</em> into the design of the IoT motor driver board. This allows users to incorporate a <a href="https://docs.simplefoc.com/position_sensors">position sensor</a> and <a href="https://docs.simplefoc.com/current_sense">current sensing</a> into the FOC algorithm or any feedback control loop they choose to implement.</p>
<p><center>
<a class="md-button md-button--primary" href="https://www.sparkfun.com/products/22132"><img alt="QR code to product page" class="tinyqr" src="../assets/img/qr_code/product-low.png" />&nbsp;&nbsp;&nbsp;Purchase from SparkFun <span class="twemoji heart"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 24C0 10.7 10.7 0 24 0h45.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5l-51.6-271c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zm128 440a48 48 0 1 1 96 0 48 48 0 1 1-96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96zM252 160c0 11 9 20 20 20h44v44c0 11 9 20 20 20s20-9 20-20v-44h44c11 0 20-9 20-20s-9-20-20-20h-44V96c0-11-9-20-20-20s-20 9-20 20v44h-44c-11 0-20 9-20 20z"/></svg></span></a>
</center></p>
</li>
</ul>
</div>
<h2 id="required-materials"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113c-9.3-9.4-9.3-24.6 0-34s24.6-9.4 33.9 0L63 101.1l55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L63 261.2l55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32h224c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32h224c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm-64 160c0-17.7 14.3-32 32-32h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"/></svg></span>&nbsp;Required Materials<a class="headerlink" href="#required-materials" title="Permanent link"></a></h2>
<p>To get started, users will need a few items. Now some users may already have a few of these items, feel free to modify your cart accordingly.</p>
<ul>
<li>Computer with an operating system (OS) that is compatible with all the software installation requirements.</li>
<li>
<p class="annotate"><a href="https://www.sparkfun.com/products/14743">USB 3.1 Cable A to C - 3 Foot</a> - Used to interface with the IoT Brushless Motor Driver (1)</p>
<ol>
<li>If your computer doesn't have a USB-A slot, then choose an appropriate cable or adapter.</li>
</ol>
</li>
<li>
<p class="annotate"><a href="https://www.sparkfun.com/products/22132">SparkFun IoT Brushless Motor Driver (ESP32 WROOM, TMC6300)</a> (1)</p>
<ol>
<li>The included gimbal motor requires a 6 to 8V power supply. However, for zero-load, low-speed testing, we have found the power from the USB connection to be sufficient.</li>
</ol>
</li>
</ul>
<div class="grid cards col-4">
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/14743">
    <figure markdown>
    <img alt="USB 3.1 Cable A to C - 3 Foot" src="https://cdn.sparkfun.com/assets/parts/1/2/9/7/2/14743-USB_3.1_Cable_A_to_C_-_3_Foot-01.jpg" />
    </figure></p>
<hr />
<p><strong>USB 3.1 Cable A to C - 3 Foot</strong><br>
CAB-14743</a></p>
</li>
<li>
<p><a href="https://www.sparkfun.com/products/22132">
    <figure markdown>
    <img alt="Product Thumbnail" src="https://cdn.sparkfun.com/assets/parts/2/1/9/9/5/22132-_01.jpg" />
    </figure></p>
<hr />
<p><strong>IoT Brushless Motor Driver (ESP32 WROOM, TMC6300)</strong><br>
ROB-22132</a></p>
</li>
</ul>
</div>
<details class="note">
<summary>Jumper Modification</summary>
<p>To modify the <a href="hardware_overview/#jumper">jumper</a>, users will need <a href="https://www.sparkfun.com/categories/49">soldering equipment</a> and/or a <a href="https://www.sparkfun.com/categories/379">hobby knife</a>.</p>
<div class="admonition tip">
<p class="admonition-title">New to jumper pads?</p>
<p>Check out our <a href="https://learn.sparkfun.com/tutorials/664">Jumper Pads and PCB Traces Tutorial</a> for a quick introduction!</p>
<div class="grid cards col-4" markdown  align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/664">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/6/6/4/PCB_TraceCutLumenati.jpg" />
    </figure></p>
<hr />
<p><strong>How to Work with Jumper Pads and PCB Traces</strong></a></p>
</li>
</ul>
</div>
</div>
<div class="grid cards col-4" markdown>
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/9325">
    <figure markdown>
    <img alt="Product Thumbnail" src="https://cdn.sparkfun.com/assets/parts/2/8/7/3/09325_9161-Solder_Lead_Free_-_100-gram_Spool-01.jpg" />
    </figure>       </p>
<hr />
<p><strong>Solder Lead Free - 100-gram Spool</strong><br>
TOL-09325</a></p>
</li>
<li>
<p><a href="https://www.sparkfun.com/products/14228">
    <figure markdown>
    <img alt="Product Thumbnail" src="https://cdn.sparkfun.com/assets/parts/1/2/1/7/3/14228-01.jpg" />
    </figure></p>
<hr />
<p><strong>Weller WLC100 Soldering Station</strong><br>
TOL-14228</a></p>
</li>
<li>
<p><a href="https://www.sparkfun.com/products/14579">
    <figure markdown>
    <img alt="Product Thumbnail" src="https://cdn.sparkfun.com/assets/parts/1/2/7/2/5/14579-Chip_Quik_No-Clean_Flux_Pen_-_10mL-01.jpg" />
    </figure></p>
<hr />
<p><strong>Chip Quik No-Clean Flux Pen - 10mL</strong><br>
TOL-14579</a></p>
</li>
<li>
<p><a href="https://www.sparkfun.com/products/9200">
    <figure markdown>
    <img alt="Product Thumbnail" src="https://cdn.sparkfun.com/assets/parts/2/6/4/6/09200-Hobby_Knife-01.jpg" />
    </figure></p>
<hr />
<p><strong>Hobby Knife</strong><br>
TOL-09200</a></p>
</li>
</ul>
</div>
</details>
<h2 id="suggested-reading"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg></span>&nbsp;Suggested Reading<a class="headerlink" href="#suggested-reading" title="Permanent link"></a></h2>
<p>As a more sophisticated product, we will skip over the more fundamental tutorials (i.e. <a href="https://learn.sparkfun.com/tutorials/voltage-current-resistance-and-ohms-law"><strong>Ohm's Law</strong></a> and <a href="https://learn.sparkfun.com/tutorials/what-is-electricity"><strong>What is Electricity?</strong></a>). However, below are a few tutorials that may help users familiarize themselves with various aspects of the board.</p>
<div align="center" class="grid cards col-4">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/908">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/9/0/8/USB-to-serial_converter_CH340-closeup.jpg" />
    </figure></p>
<hr />
<p><strong>How to Install CH340 Drivers</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/2353">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/2/3/5/3/assembly_batt.jpg" />
    </figure></p>
<hr />
<p><strong>ESP32 Thing Plus (USB-C)</strong></a></p>
</li>
<li>
<p><a href="http://docs.sparkfun.com/SparkFun_Three_Phase_Motor_Driver-TMC6300/">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/parts/2/1/6/9/6/21867-_SparkFun_Brushless_Motor_Drive-_04.jpg" />
    </figure></p>
<hr />
<p><strong>TMC6300 BLDC Motor Driver</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/61">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/6/1/arduinoThumb.jpg" />
    </figure></p>
<hr />
<p><strong>Installing the Arduino IDE</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/1265">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/1/2/6/5/sparkfun_boards.PNG" />
    </figure></p>
<hr />
<p><strong>Installing Board Definitions in the Arduino IDE</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/15">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/b/e/4/b/2/50f04b99ce395fd95e000001.jpg" />
    </figure></p>
<hr />
<p><strong>Installing an Arduino Library</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/62">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/6/2/Input_Output_Logic_Level_Tolerances_tutorial_tile.png" />
    </figure></p>
<hr />
<p><strong>Logic Levels</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/51">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/f/9/c/8/a/512e869bce395fbc64000002.JPG" />
    </figure></p>
<hr />
<p><strong>Pulse Width Modulation</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/89">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/3/7/6/6/0/51c48875ce395f745a000000.png" />
    </figure></p>
<hr />
<p><strong>Analog vs. Digital</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/82">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/8/2/I2C-Block-Diagram.jpg" />
    </figure></p>
<hr />
<p><strong>I2C</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/16">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/1/6/spiThumb_Updated.jpg" />
    </figure></p>
<hr />
<p><strong>SPI</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/8">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/7/d/f/9/9/50d24be7ce395f1f6c000000.jpg" />
    </figure></p>
<hr />
<p><strong>Serial Communication</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/5">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/e/3/9/9/4/51d9fbe1ce395f7a2a000000.jpg" />
    </figure></p>
<hr />
<p><strong>How to Solder: Through-Hole Soldering</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/664">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/6/6/4/PCB_TraceCutLumenati.jpg" />
    </figure></p>
<hr />
<p><strong>How to Work with Jumper Pads and PCB Traces</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/126">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/4/c/6/4/7/52a22672757b7f511d8b456b.jpg" />
    </figure></p>
<hr />
<p><strong>Motors and Selecting the Right One</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/115">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/1/1/5/acDC.jpg" />
    </figure></p>
<hr />
<p><strong>Alternating Current (AC) vs. Direct Current (DC)</strong></a></p>
</li>
</ul>
</div>
<details class="info">
<summary>Need to control a different type of motor?</summary>
<p>This tutorial is primarily focused on utilizing the TMC6300 motor driver to control a 3-phase brushless DC (BLDC) motor. We would recommend users explore other products for these specific motors and actuators. Below, are additional product tutorials and resources for our other actuator and motor types:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Brushed DC Motors</label><label for="__tabbed_1_2">Stepper Motors</label><label for="__tabbed_1_3">Servos</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="grid cards col-4" markdown align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/934">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/9/3/4/15451-SparkFun_Qwiic_Motor_Driver-01.jpg" />
    </figure></p>
<hr />
<p><strong>Hookup Guide for the Qwiic Motor Driver</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/526">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/5/6/2/13845-02.jpg" />
    </figure></p>
<hr />
<p><strong>TB6612FNG Hookup Guide</strong></a></p>
</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<div class="grid cards col-4" markdown align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/1200">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/1/2/0/0/example8_demo.gif" />
    </figure></p>
<hr />
<p><strong>SparkFun ProDriver Hookup Guide</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/210">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/2/4/1/EasyDriver_Angled.jpg" />
    </figure></p>
<hr />
<p><strong>Easy Driver Hook-up Guide</strong></a></p>
</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<div class="grid cards col-4" markdown align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/1109">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/1/1/0/9/Basic_Servo_Guide_Demo.gif" />
    </figure></p>
<hr />
<p><strong>Basic Servo Control for Beginners</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/526">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/5/2/6/servo_6.jpg" />
    </figure></p>
<hr />
<p><strong>Hobby Servo Tutorial</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/910">
    <figure markdown>
    <img alt="Tutorial Thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/9/1/0/Assembly_Servo.gif" />
    </figure></p>
<hr />
<p><strong>Pi Servo pHAT (v2) Hookup Guide</strong></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</details>
<h1 id="hardware-overview">Hardware Overview<a class="headerlink" href="#hardware-overview" title="Permanent link"></a></h1>
<h2 id="board-dimensions">Board Dimensions<a class="headerlink" href="#board-dimensions" title="Permanent link"></a></h2>
<p>The board dimensions are illustrated in the drawing below; the listed measurements are in inches.</p>
<figure>
<p><a href="../assets/img/hookup_guide/dimensions.png" title="Click to enlarge"><img alt="Board Dimensions" src="../assets/img/hookup_guide/dimensions.png" width="400" /></a></p>
<figcaption>
<p><a href="../assets/board_files/dimensions.pdf">Board dimensions (PDF)</a> for the IoT Motor Driver board, in inches.</p>
</figcaption>
</figure>
<details class="tip">
<summary>Need more measurements?</summary>
<p>For more information about the board's dimensions, users can download the <a href="../assets/board_files/eagle_files.zip">eagle files</a> for the board. These files can be opened in Eagle and additional measurements can be made with the dimensions tool.</p>
<details class="info">
<summary><span class="twemoji heart"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z"/><path d="M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z"/></svg></span> Eagle - Free Download!</summary>
<p>Eagle is a <a href="" title="computer-aided design">CAD</a> program for electronics that is free to use for hobbyists and students. However, it does require an account registration to utilize the software.</p>
<p><center>
<a class="md-button md-button--primary" href="https://www.autodesk.com/products/eagle/free-download" title="Go to downloads page" width="250px">Download from<br><span class="twemoji autodesk"><svg role="img" viewbox=" 0 0 335 34.397" xmlns="http://www.w3.org/2000/svg"><title>Autodesk primary logo</title><path d="M 0.253,33.578 29.488,15.376 H 44.66 c 0.468,0 0.896,0.37 0.896,0.897 0,0.428 -0.195,0.604 -0.428,0.74 l -14.355,8.614 c -0.935,0.565 -1.266,1.676 -1.266,2.514 l -0.019,5.437 h 18.25 V 2.026 c 0,-0.604 -0.468,-1.13 -1.169,-1.13 H 29.157 L 0,19.02 v 14.558 z m 239.72,10e-4 h 26.294 V 26.504 H 248.309 V 20.58 h 14.452 V 13.486 H 248.309 V 7.971 h 17.958 V 0.896 H 239.973 Z M 74.752,0.896 62.228,33.579 h 8.609 l 2.181,-6.12 h 13.985 l 2.142,6.12 h 8.901 L 85.367,0.896 Z m 0.74,19.606 4.577,-12.804 4.499,12.804 z M 133.766,7.971 h 10.537 v 25.608 h 8.317 V 7.971 h 10.498 V 0.896 h -29.352 z m -12.114,13.018 c 0,4.249 -2.61,5.964 -7.07,5.964 -4.324,0 -7.148,-1.793 -7.148,-5.964 V 0.779 h -8.336 v 21.165 c 0,9.432 8.414,12.375 15.464,12.375 7.012,0 15.387,-2.943 15.387,-12.375 V 0.779 h -8.336 v 20.21 z M 335,0.896 h -9.914 l -11.88,13.272 V 0.896 h -8.337 l 0.039,32.683 h 8.298 V 21.165 l 11.257,12.414 H 335 L 319.808,17.442 Z m -114.621,0 h -15.27 v 32.683 h 15.27 c 11.706,0 14.939,-4.366 14.939,-16.585 0,-11.479 -3.097,-16.098 -14.939,-16.098 z m -0.331,25.608 h -6.622 V 7.971 h 6.622 c 5.22,0 6.778,1.422 6.778,9.023 0,6.938 -1.753,9.51 -6.778,9.51 z m 71.402,-12.16 -7.596,-0.858 c -4.441,-0.487 -5.551,-1.598 -5.551,-3.099 0,-1.676 2.279,-3.176 6.739,-3.176 4.285,0 6.525,1.598 6.934,3.995 h 8.161 C 299.727,4.287 293.943,0 285.49,0 c -10.05,0 -15.094,3.995 -15.094,11.07 0,5.749 3.35,8.458 10.283,9.198 l 7.713,0.819 c 2.941,0.331 4.285,1.461 4.285,2.942 0,1.676 -1.967,3.177 -6.7,3.177 -5.473,0 -7.674,-1.384 -8.044,-4.171 h -8.005 c 0.37,7.523 5.259,11.362 15.757,11.362 9.582,0 14.938,-4.209 14.938,-10.543 0,-5.515 -3.174,-8.828 -9.173,-9.51 z M 182.497,0 c -11.881,0 -18.035,7.308 -18.035,17.15 0,9.881 6.154,17.228 18.035,17.228 11.92,0 18.075,-7.347 18.075,-17.228 C 200.591,7.308 194.417,0 182.497,0 Z m 0,27.031 c -6.155,0 -9.543,-3.762 -9.543,-9.881 0,-6.003 3.388,-9.803 9.543,-9.803 6.213,0 9.544,3.8 9.544,9.803 0.019,6.139 -3.331,9.881 -9.544,9.881 z"/></svg></span></a>
</center></p>
</details>
<details class="info">
<summary><img alt="📏" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f4cf.svg" title=":straight_ruler:" /> Dimensions Tool</summary>
<p>This video from Autodesk demonstrates how to utilize the dimensions tool in Eagle, to include additional measurements:</p>
<p><center>
<div class="video">
<iframe src="https://www.youtube.com/embed/dZLNd1FtNB8" title="EAGLE Dimension Tool" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<img alt="QR code to play video" class="qr" src="../assets/img/qr_code/dimension_tool.png" />
</center></p>
</details>
</details>
<h2 id="usb-c-connector">USB-C Connector<a class="headerlink" href="#usb-c-connector" title="Permanent link"></a></h2>
<p>The USB connector is provided to power and program the board. For most users, it will be the primary programming interface for the ESP32 module on the IoT Motor Driver board.</p>
<figure>
<p><a href="../assets/img/hookup_guide/usb_connector.jpg" title="Click to enlarge"><img alt="USB-C Connector" src="../assets/img/hookup_guide/usb_connector.jpg" width="400" /></a></p>
<figcaption>
<p>USB-C connector on the IoT Motor Driver board.</p>
</figcaption>
</figure>
<h3 id="power">Power<a class="headerlink" href="#power" title="Permanent link"></a></h3>
<p>The IoT Motor Driver only requires <strong>5V</strong> to power all of the board's components. The simplest method to power the board is through the USB-C connector. Alternatively, the <code>3V3</code> pin can be used to supply power to any of the components, except the motor driver.</p>
<figure>
<p><a href="../assets/img/hookup_guide/power_connections.jpg" title="Click to enlarge"><img alt="Power connections" src="../assets/img/hookup_guide/power_connections.jpg" width="400" /></a></p>
<figcaption>
<p>IoT Motor Driver power connections.</p>
</figcaption>
</figure>
<p>Below, is a general summary of the power circuitry on the board:</p>
<ul>
<li><strong><code>3V3</code></strong> - Provides a regulated 3.3V from the USB (5V) power to the board, excluding the TMC6300 motor driver.<ul>
<li>Used to power the ESP32-WROOM module, hall-effect and current sensors, CH340C Serial-to-UART bridge, Qwiic connector, and the WS2812 RGB LED.</li>
<li>The <strong>3.3V</strong> <a href="../assets/component_documentation/AP2112.pdf">AP2112</a> LDO regulator can source up to 600mA.</li>
<li>Broken out as <a href="https://en.wikipedia.org/wiki/Through-hole_technology" title="Plated Through Holes">PTH</a> pin.</li>
</ul>
</li>
<li><strong><code>3V3_A</code></strong> - Provides a regulated 3.3V from the USB (5V) power to only the TMC6300 motor driver.<ul>
<li>The motor driver will not function without power from the USB connector.</li>
<li>The <strong>3.3V</strong> <a href="../assets/component_documentation/AP63356-AP63357.pdf">AP63357</a> LDO regulator can source up to 3.5A.</li>
</ul>
</li>
<li><strong><code>VUSB</code></strong> - The voltage from the USB-C connector, usually <strong>5V</strong>.<ul>
<li>Power source for the entire board.<ul>
<li>Powers the two 3.3V voltage regulators (AP2112 and AP63357).</li>
</ul>
</li>
<li>Features reverse current protection and a thermal fuse.</li>
<li><code>MEAS</code> - These pins can be used to measure the current being drawn through the USB connector <em>(see the <strong><a href="#jumpers">Jumpers</a></strong> section)</em>.</li>
</ul>
</li>
<li><strong><code>GND</code></strong> - The common ground or the 0V reference for the voltage supplies.</li>
<li><strong>Qwiic Connector</strong> - Provides a regulated 3.3V voltage to the Qwiic devices.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details, users can reference the <a href="../assets/board_files/schematic.pdf">schematic</a> and the datasheets of the individual components on the board.</p>
</div>
<details class="warning">
<summary>Motor Voltage</summary>
<p>The <a href="https://cdn.sparkfun.com/assets/e/b/2/8/3/OT-EM3215_DC_Brushless_Gimbal_Motor_3_Phase_Datasheet.pdf">Gimbal Stabilizer Motor</a> has an operating voltage range of 6 - 8V. However, we have found that it still functions properly with only 3.3V provided by the IoT Motor Driver board.</p>
</details>
<h3 id="ch340-serial-to-uart">CH340 Serial-to-UART<a class="headerlink" href="#ch340-serial-to-uart" title="Permanent link"></a></h3>
<p>The CH340 allows the ESP32-WROOM to communicate with a computer/host device through the board's USB-C connection. This allows the board to show up as a device on the serial (or COM) port of the computer. Users will need to install the latest drivers for the computer to recognize the board <em>(see <a href="/SparkFun_IoT_Brushless_Motor_Driver/software_overview/#ch340-driver"><strong>Software Overview</strong></a> section)</em>.</p>
<h2 id="microcontroller-esp32-wroom"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg></span>&nbsp;Microcontroller - ESP32-WROOM<a class="headerlink" href="#microcontroller-esp32-wroom" title="Permanent link"></a></h2>
<p>The brains of the IoT Motor Driver, is an <a href="../assets/component_documentation/esp32-wroom-32e_datasheet_en.pdf">ESP32-WROOM module</a> with 16MB of flash memory. Espressif's ESP32-WROOM module is a versatile, WiFi+BT+BLE MCU module that targets a wide variety of applications. At the core of this module is the ESP32-D0WDQ6 system on a chip (SoC) which is designed to be both scalable and adaptive microcontroller. Its laundry list of features include:</p>
<div class="grid cards">
<ul>
<li>
<p>Features:</p>
<ul>
<li>Xtensa® Dual-Core 32-bit LX6 Microprocessor <em>(up to 240MHz)</em><ul>
<li>448KB ROM and 520KB SRAM</li>
<li>16MB of Embedded SPI Flash Storage</li>
</ul>
</li>
<li>Cryptographic Hardware Accelerators<ul>
<li>AES, SHA2, ECC, RSA-4096</li>
</ul>
</li>
<li>Integrated 802.11 b/g/n WiFi 2.4GHz Transceiver <em>(up to 150Mbps)</em></li>
<li>Integrated dual-mode Bluetooth (Bluetooth v4.2 and BLE)</li>
<li>26 GPIO <em>(including strapping pins)</em><ul>
<li>8x Capacitive Touch Electrodes</li>
</ul>
</li>
<li>Operating Voltage: <strong>3.0 to 3.6V</strong><ul>
<li>WiFi: 380mA <em>(peak)</em></li>
<li>Light-Sleep: 800&micro;A</li>
<li>Deep-Sleep: 10 - 150&micro;A</li>
</ul>
</li>
</ul>
</li>
<li>
<p><figure markdown>
    <a href="../assets/img/hookup_guide/esp32_module.jpg" title="Click to enlarge"><img alt="ESP32-WROOM" src="../assets/img/hookup_guide/esp32_module.jpg" width="400" /></a>
    <figcaption markdown>ESP32-WROOM module on the IoT Motor Driver.</figcaption>
    </figure></p>
</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Users should be aware of the following nuances and details of this board</p>
<ul>
<li>The ESP32-WROOM is only compatible with <strong>2.4GHz WiFi</strong> networks; it will not work on the 5GHz bands.</li>
<li>For details on the boot mode configuration, please refer to <a href="../assets/component_documentation/esp32-wroom-32e_datasheet_en.pdf#8">section <strong>3.3 Strapping Pins</strong></a> of the ESP32-WROOM module datasheet.</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The ESP32-WROOM module has various power modes:</p>
<ul>
<li><strong>Active</strong> - The chip radio is powered on. The chip can receive, transmit, or listen.</li>
<li><strong>Modem Sleep</strong> - The CPU is operational and the clock is configurable. The Wi-Fi/Bluetooth
baseband and radio are disabled.</li>
<li><strong>Light Sleep</strong> - The CPU is paused. The RTC memory and RTC peripherals, as well as the ULP
coprocessor are running.</li>
<li><strong>Deep Sleep</strong> - Only the RTC memory and RTC peripherals are powered on. The ULP coprocessor is functional.</li>
<li><strong>Hibernation</strong> - Only one RTC timer on the slow clock and certain RTC GPIOs are
active.</li>
<li><strong>Off</strong> - Chip is powered off</li>
</ul>
<p><em>For more information on the power management of the ESP32-WROOM module, pleaser refer to <strong>Section 3.7</strong> and <strong>Tables: 8 and 17</strong> of the <a href="../assets/component_documentation/esp32_soc_datasheet_en.pdf">ESP32 SoC Datasheet</a>.</em></p>
</div>
<h3 id="debugging">Debugging<a class="headerlink" href="#debugging" title="Permanent link"></a></h3>
<p>For users interested in debugging their code, the <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-guides/jtag-debugging/configure-other-jtag.html#configure-hardware">JTAG pins</a> are broken out on the board. However, the debugging feature is only available through the <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-guides/jtag-debugging/index.html?highlight=jtag">ESP-IDF</a>.</p>
<ul>
<li><strong><code>TMS</code></strong>: <code>GPIO 14</code></li>
<li><strong><code>TDI</code></strong>: <code>GPIO 12</code></li>
<li><strong><code>TCK</code></strong>: <code>GPIO 13</code></li>
<li><strong><code>TDO</code></strong>: <code>GPIO 15</code></li>
</ul>
<figure>
<p><a href="../assets/img/hookup_guide/jtag_pins.jpg" title="Click to enlarge"><img alt="JTAG Pins" src="../assets/img/hookup_guide/jtag_pins.jpg" width="400" /></a></p>
<figcaption>
<p>The JTAG pins of the ESP32-WROOM module on the IoT Motor Driver.</p>
</figcaption>
</figure>
<h3 id="firmware-download-mode">Firmware Download Mode<a class="headerlink" href="#firmware-download-mode" title="Permanent link"></a></h3>
<p>Users can manually force the board into the <a href="https://docs.espressif.com/projects/esptool/en/latest/esp32/advanced-topics/boot-mode-selection.html#select-bootloader-mode">serial bootloader</a> with the <span class="keys"><kbd>BOOT</kbd></span> button. Please, refer to the <a href="#boot-button"><strong>Boot Button</strong> section</a> below for more information.</p>
<h3 id="peripherals-and-io">Peripherals and I/O<a class="headerlink" href="#peripherals-and-io" title="Permanent link"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Users should be aware of the following nuances of this board</p>
<ul>
<li>&#9889; All the GPIO on the IoT Motor Driver are <strong>3.3V</strong> pins.<ul>
<li>The I/O pins are <strong>not 5V-tolerant</strong>! To interface with higher voltage components, a <strong><a href="https://learn.sparkfun.com/tutorials/bi-directional-logic-level-converter-hookup-guide">logic level adapter</a></strong> is recommended.</li>
</ul>
</li>
<li>&#9889; There are electrical limitations to the amount of current that the ESP32-WROOM module can sink or source. For more details, check out the <a href="../assets/component_documentation/esp32-wroom-32e_datasheet_en.pdf">ESP32-WROOM module datasheet</a>.</li>
<li>There are some limitations to the ADC performance, see the <b>Note</b> from the <a href="../assets/component_documentation/esp32_soc_datasheet_en.pdf"><strong>ADC Characteristics</strong> section of the ESP32 SoC datasheet</a>.</li>
</ul>
</div>
<p>The ESP32-WROOM module has <em>26 multifunctional GPIO</em>, of which, <strong>16 I/O pins</strong> are used to interface with motor driver, sensors, and status LED on the board. Additionally, <strong>13 I/O pins</strong> are broken out to <a href="https://en.wikipedia.org/wiki/Through-hole_technology" title="Plated Through Holes">PTH</a> pins and the users buttons. All of the <a href="https://www.sparkfun.com/products/22132">IoT Motor Driver</a> pins have a .1" pitch spacing for headers.</p>
<p>While all of the GPIO pins are capable of functioning as digital I/O pins, various pins can have additional capabilities with the <a href="https://docs.espressif.com/projects/arduino-esp32/en/latest/tutorials/io_mux.html?#id1">pin multiplexing</a> feature of the ESP32 SoC. For more technical specifications on the <strong>I/O</strong> pins, please refer to the <a href="../assets/component_documentation/esp32_soc_datasheet_en.pdf">ESP32 SoC datasheet</a>.</p>
<ul>
<li>13x 12-bit analog to digital converter (ADC) channels</li>
<li>3x UARTs (only two are configured by default in the Arduino IDE, one UART is used for bootloading/debug)</li>
<li>3x SPI (only one is configured by default in the Arduino IDE)</li>
<li>2x I<sup>2</sup>C (only one is configured by default in the Arduino IDE)</li>
<li>2x I<sup>2</sup>S Audio</li>
<li>2x digital-to-analog converter (DAC) channels</li>
<li>16x 20-bit PWM outputs</li>
<li>8x Capacitive Touch Inputs</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Users should be aware of the following limitations for the board in the Arduino IDE.</p>
<ul>
<li>Not all of the features, listed above, are available in the Arduino IDE. For the full capabilities of the ESP32, the Espressif IDF should be utilized.<ul>
<li>Only one I<sup>2</sup>C bus is defined.</li>
<li>Only two UART interfaces are available.<ul>
<li><strong>UART (USB):</strong> <code>Serial</code></li>
<li><strong><code>RX</code>/<code>TX</code> Pins:</strong> <code>Serial1</code></li>
</ul>
</li>
<li>Only one SPI bus is defined.</li>
</ul>
</li>
</ul>
</div>
<h4 id="peripheral-devices">Peripheral Devices<a class="headerlink" href="#peripheral-devices" title="Permanent link"></a></h4>
<p>This development board features several components operating together to create an IoT device. Their connections are shown in the diagram below and their operations are listed in the boxes below. <em>For more details on each component, please refer to the sections below.</em></p>
<figure>
<p><a href="../assets/img/hookup_guide/block_diagram.png" title="Click to enlarge"><img alt="Block Diagram" src="../assets/img/hookup_guide/block_diagram.png" width="400" /></a></p>
<figcaption>
<p>Block diagram of the IoT Motor Driver board's peripherals.</p>
</figcaption>
</figure>
<div class="grid cards col-2">
<ul>
<li>
<p><strong>Inputs</strong></p>
<hr />
<ul>
<li>TMC6300 Motor Driver<ul>
<li>Diagnostic Pin</li>
</ul>
</li>
<li>TMAG5273 Hall-Effect Sensor</li>
<li>INA240 Current-Sense Amplifier</li>
<li>MCP6021 Operational Amplifier</li>
<li>User Buttons</li>
</ul>
</li>
<li>
<p><strong>Outputs</strong></p>
<hr />
<ul>
<li>TMC6300 Motor Driver<ul>
<li>Half-Bridge Pins</li>
<li>Standby Pin</li>
</ul>
</li>
<li>RGB Status LED</li>
</ul>
</li>
</ul>
</div>
<h4 id="pin-functionality">Pin Functionality<a class="headerlink" href="#pin-functionality" title="Permanent link"></a></h4>
<p>There are several pins that have special functionality in addition to general <strong>digital I/O</strong>. These pins and their additional functions are listed in the tabs below. For more technical specifications on the <strong>I/O</strong> pins, you can refer to the <a href="../assets/board_files/schematic.pdf">schematic</a>, <a href="../assets/component_documentation/esp32-wroom-32e_datasheet_en.pdf">ESP32-WROOM module datasheet</a>, <a href="../assets/component_documentation/esp32_soc_datasheet_en.pdf">ESP32 SoC datasheet</a>, and <a href="https://docs.espressif.com/projects/arduino-esp32/en/latest/tutorials/io_mux.html?#peripherals">documentation for the ESP32 Arduino core</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:6"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><input id="__tabbed_2_5" name="__tabbed_2" type="radio" /><input id="__tabbed_2_6" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Digital I/O Pins</label><label for="__tabbed_2_2">Analog Inputs</label><label for="__tabbed_2_3">PWM &amp; Analog (DAC) Outputs</label><label for="__tabbed_2_4">Serial Pins</label><label for="__tabbed_2_5">SPI Pins</label><label for="__tabbed_2_6">I<sup>2</sup>C Pins</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Any GPIO pin on the ESP32-WROOM module can function as a digital I/O <em>(input or output)</em>. However, users will need to declare the <a href="https://www.arduino.cc/reference/en/language/functions/digital-io/pinmode/"><strong><code>pinMode()</code></strong> <em>(link)</em></a> in the setup of their <b>sketch</b> (programs written in the Arduino IDE) to configure a pin as an input or an output.</p>
<div class="grid cards col-2" markdown>
<ul>
<li>
<p><strong>Inputs</strong></p>
<hr />
<p>When configured properly, an <b>input</b> pin will be looking for a <b>HIGH</b> or <b>LOW</b> state. <b>Input</b> pins are <b>High Impedance</b> and takes very little current to move the input pin from one state to another.</p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;"><strong><code>DIAG</code> <em>(TMC6300)</em></strong></th>
<th style="text-align: left;"><code>GPIO 34</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong><code>INT</code> <em>(TMAG5273)</em></strong></td>
<td style="text-align: left;"><code>GPIO 04</code></td>
</tr>
<tr>
<td style="text-align: left;"><strong>Button <span class="keys"><kbd>13</kbd></span></strong></td>
<td style="text-align: left;"><code>GPIO 13</code></td>
</tr>
<tr>
<td style="text-align: left;"><strong>Button <span class="keys"><kbd>14</kbd></span></strong></td>
<td style="text-align: left;"><code>GPIO 14</code></td>
</tr>
</tbody>
</table>
<p></center></p>
</li>
<li>
<p><strong>Outputs</strong></p>
<hr />
<p>When configured as an <b>output</b> the pin will be at a <b>HIGH</b> or <b>LOW</b> voltage. <b>Output</b> pins are <b>Low Impedance</b>: This means that they can provide a relatively substantial amount of current to other circuits.</p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;"><strong><code>VIO</code> <em>(TMC6300)</em></strong></th>
<th style="text-align: left;"><code>GPIO 05</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>WS2812</strong></td>
<td style="text-align: left;"><code>GPIO 02</code></td>
</tr>
</tbody>
</table>
<p></center></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>&#9889;</strong> There are electrical limitations to the amount of current that the ESP32-WROOM module can sink or source. For more details, check out the <a href="./assets/component_documentation/esp32-wroom-32e_datasheet_en.pdf">ESP32-WROOM module datasheet</a>.</p>
</div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Pins cannot be configured to operate simultaneously as an input and output, without implementing the pin as an interrupt.</p>
</div>
</div>
<div class="tabbed-block">
<p>The ESP32-WROOM module provides a <b>12-bit ADC</b> input on thirteen of its I/O pins. This functionality is accessed in the Arduino IDE using the <a href="https://www.arduino.cc/reference/en/language/functions/analog-io/analogread/"><code>analogRead(pin)</code> function</a>. <em>(The available ADC pins are highlighted in the image below.)</em></p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;"><strong>Current Sensor</strong></th>
<th style="text-align: center;">INA240 <em>(<code>U</code>)</em></th>
<th style="text-align: center;">INA240 <em>(<code>V</code>)</em></th>
<th style="text-align: center;">INA240 <em>(<code>W</code>)</em></th>
<th style="text-align: center;">MCP6021</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Analog Input</strong></td>
<td style="text-align: center;"><code>GPIO 35</code></td>
<td style="text-align: center;"><code>GPIO 36</code></td>
<td style="text-align: center;"><code>GPIO 39</code></td>
<td style="text-align: center;"><code>GPIO 32</code></td>
</tr>
</tbody>
</table>
<p></center></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>By default, in the Arduino IDE, <code>analogRead()</code> returns a 10-bit value. To change the resolution of the value returned by the <code>analogRead()</code> function, use the <a href="https://www.arduino.cc/reference/en/language/functions/zero-due-mkr-family/analogreadresolution/"><code>analogReadResolution(bits)</code> function</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To learn more about analog vs. digital signals, check out this great <a href="https://learn.sparkfun.com/tutorials/analog-vs-digital">tutorial</a>.</p>
<div class="grid cards col-4" markdown  align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/89">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/3/7/6/6/0/51c48875ce395f745a000000.png" />
    </figure></p>
<hr />
<p><strong>Analog vs. Digital</strong></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="tabbed-block">
<p>The ESP32-WROOM module supports up to sixteen channels of <b>20-bit PWM</b> (Pulse Width Modulation) outputs on any of its I/O pins. This is accessed in the Arduino IDE using the <a href="https://www.arduino.cc/reference/en/language/functions/analog-io/analogwrite/"><code>analogWrite(pin, value)</code> function</a>. <em>(Any I/O pin can be used for the PWM outputs; the available DAC pins, with true analog outputs, are highlighted in the image below.)</em></p>
<p><a href="../assets/img/hookup_guide/pins_dac.jpg"><img align="left" alt="Annotated image of DAC pins" src="../assets/img/hookup_guide/pins_dac.jpg" width="300" /></a></p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;"><strong>Motor Driver</strong></th>
<th style="text-align: center;"><code>UH</code></th>
<th style="text-align: center;"><code>UL</code></th>
<th style="text-align: center;"><code>VH</code></th>
<th style="text-align: center;"><code>VL</code></th>
<th style="text-align: center;"><code>WH</code></th>
<th style="text-align: center;"><code>WL</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>PWM Output</strong></td>
<td style="text-align: center;"><code>GPIO 16</code></td>
<td style="text-align: center;"><code>GPIO 17</code></td>
<td style="text-align: center;"><code>GPIO 18</code></td>
<td style="text-align: center;"><code>GPIO 23</code></td>
<td style="text-align: center;"><code>GPIO 19</code></td>
<td style="text-align: center;"><code>GPIO 33</code></td>
</tr>
</tbody>
</table>
<p></center></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>By default, in the Arduino IDE, <code>analogWrite()</code> accepts an 8-bit value. To change the resolution of the PWM signal for the <code>analogWrite()</code> function, use the <a href="https://www.arduino.cc/reference/en/language/functions/zero-due-mkr-family/analogwriteresolution/"><code>analogWriteResolution(bits)</code> function</a>. <em>(The PWM output is not a true analog signal.)</em></p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To learn more about pulse width modulation (PWM), check out this great <a href="https://learn.sparkfun.com/tutorials/pulse-width-modulation">tutorial</a>.</p>
<div class="grid cards col-4" markdown  align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/51">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/f/9/c/8/a/512e869bce395fbc64000002.JPG" />
    </figure></p>
<hr />
<p><strong>Pulse Width Modulation</strong></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="tabbed-block">
<p>The ESP32-WROOM module provides three UART ports. By default, the UART port for the USB connection (<code>Serial</code>) and the labeled UART I/O pins on the board (<code>Serial1</code>) can be accessed through the Arduino IDE using the <a href="https://www.arduino.cc/reference/en/language/functions/communication/serial/">serial communication class</a>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>By default, in the Arduino IDE, the <strong><Dev Board Name></strong> board definition supports:     </p>
<ul>
<li><code>Serial</code> - <strong>UART (USB)</strong></li>
<li><code>Serial1</code> - <strong>Pins: <code>RX</code>/<code>TX</code> (<code>GPIO 16</code>/<code>GPIO 17</code>)</strong></li>
</ul>
<details class="note">
<summary>Note</summary>
<ul>
<li>The <code>GPIO 16</code> and <code>GPIO 17</code> pins of <code>Serial1</code> are already dedicated to the <code>UH</code>/<code>UL</code> half-bridge on the TMC63000 motor driver and are not broken out for users to access.</li>
<li>In order to utilize the serial communication on the strapping pins, users will need to create a custom serial port object and declare which pins to access.</li>
</ul>
</details>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To learn more about serial communication, check out this great <a href="https://learn.sparkfun.com/tutorials/serial-communication">tutorial</a>.</p>
<div class="grid cards col-4" markdown  align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/8">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/7/d/f/9/9/50d24be7ce395f1f6c000000.jpg" />
    </figure></p>
<hr />
<p><strong>Serial Communication</strong></a></p>
</li>
</ul>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We have noticed that with the ESP32 Arduino core, <code>Serial.available()</code> does not operate instantaneously. This is due to an interrupt triggered by the UART, to empty the FIFO when the <b><code>RX</code></b> pin is inactive for two byte periods:</p>
<ul>
<li>At 9600 baud, <code>hwAvailable</code> takes [<code>number of bytes received</code> + 2] x 1 ms = <b>11 ms</b> before the UART indicates that data was received from: <code>\r\nERROR\r\n</code>.</li>
<li>At 115200 baud, <code>hwAvailable</code> takes [<code>number of bytes received</code> + 2] x .087 ms = <b>~1 ms</b> before the UART indicates that data was received from: <code>\r\nERROR\r\n</code>.</li>
</ul>
<p><em>For more information, please refer to this <a href="https://gitter.im/espressif/arduino-esp32?at=5e25d6370a1cf54144909c85">chatroom discussion</a>.</em></p>
</div>
</div>
<div class="tabbed-block">
<p>The ESP32-WROOM module provides three SPI buses. By default, in the Arduino IDE, the <a href="https://www.arduino.cc/en/reference/SPI">SPI class</a> is configured to utilize pins <code>GPIO 18</code> <em>(SCK)</em>, <code>GPIO 19</code> <em>(POCI)</em>, <code>GPIO 23</code> <em>(PICO)</em>. In order to utilize the other SPI ports or objects, users will need to create a custom SPI object and declare which pins to access.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>To comply with the latest <a href="https://www.oshwa.org/">OSHW</a> design practices, we have <a href="https://www.sparkfun.com/spi_signal_names">adopted the new SPI signal nomenclature</a> (<strong>SDO</strong>/<strong>SDI</strong> and <strong>PICO</strong>/<strong>POCI</strong>). The terms Master and Slave are now referred to as Controller and Peripheral. The <code>MOSI</code> signal on a controller has been replaced with <code>SDO</code> or <code>PICO</code>. Please refer to this <a href="https://www.oshwa.org/a-resolution-to-redefine-spi-signal-names">announcement on the decision to deprecate the <strong>MOSI</strong>/<strong>MISO</strong> terminology and transition to the <strong>SDO</strong>/<strong>SDI</strong> naming convention</a>.</p>
</div>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;"><strong>SCK</strong></th>
<th style="text-align: left;"><code>GPIO 18</code> (<code>SCK</code>)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>SDI</strong> or <strong>POCI</strong></td>
<td style="text-align: left;"><code>GPIO 19</code> (<code>MISO</code>)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>SDO</strong> or <strong>PICO</strong></td>
<td style="text-align: left;"><code>GPIO 23</code> (<code>MOSI</code>)</td>
</tr>
<tr>
<td style="text-align: left;"><strong>CS</strong></td>
<td style="text-align: left;"><code>GPIO 5</code> (<code>SS</code>)</td>
</tr>
</tbody>
</table>
<p></center></p>
<details class="note">
<summary>Note</summary>
<ul>
<li>The <code>GPIO 18</code>,<code>GPIO 19</code>, and <code>GPIO 23</code> pins of the <code>SPI</code> bus are already dedicated to the <code>VH</code>/<code>WH</code>/<code>VL</code> MOSFETs on the TMC63000 motor driver and are not broken out for users to access.</li>
<li>The <code>CS</code> pin associated with <code>GPIO 05</code> is also already dedicated to the <code>STBY</code> pin of the TMC63000 motor driver and is not broken out for users to access.</li>
</ul>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To learn more about the serial peripheral interface (SPI) protocol, check out this great <a href="https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi">tutorial</a>.</p>
<div class="grid cards col-4" markdown  align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/16">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/1/6/spiThumb_Updated.jpg" />
    </figure></p>
<hr />
<p><strong>Serial Peripheral Interface (SPI)</strong></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="tabbed-block">
<p>The ESP32-WROOM module module can support up to two I<sup>2</sup>C buses. By default, in the Arduino IDE, the <a href="https://www.arduino.cc/en/reference/wire">Wire class</a> is configured to utilize pins <code>GPIO 21</code> <em>(SDA)</em> and <code>GPIO 22</code> <em>(SCL)</em>. These pins share the same I<sup>2</sup>C bus with the Qwiic connector and TMAG5273 hall-effect sensor. In order to utilize the other I<sup>2</sup>C ports, users will need to create a custom Wire object and declare which pins to access.</p>
<div class="grid cards col-2" markdown>
<ul>
<li>
<p><center></p>
<p><strong>I<sup>2</sup>C Pins</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;"><strong>SCL</strong></th>
<th style="text-align: left;"><code>GPIO 22</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>SDA</strong></td>
<td style="text-align: left;"><code>GPIO 21</code></td>
</tr>
</tbody>
</table>
<p></center></p>
<hr />
<p>TMAG5273 I<sup>2</sup>C Address:</p>
<ul>
<li><strong>0x35 <em>(Default)</em></strong> (7-bit)</li>
<li>0x6A (write)/0x6B (read)</li>
</ul>
</li>
<li>
<p><figure markdown>
    <a href="../assets/img/hookup_guide/i2c_connections.jpg" title="Click to enlarge"><img alt="Tutorial thumbnail" src="../assets/img/hookup_guide/i2c_connections.jpg" width="400" /></a>
    <figcaption markdown>Default I<sup>2</sup>C bus connections for the IoT Motor Driver.</figcaption>
    </figure></p>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To learn more about the inter-integrated circuit (I<sup>2</sup>C) protocol, check out this great <a href="https://learn.sparkfun.com/tutorials/i2c">tutorial</a>.</p>
<div class="grid cards col-4" markdown  align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/82">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/8/2/I2C-Block-Diagram.jpg" />
    </figure></p>
<hr />
<p><strong>Inter-Integrated Circuit (I<sup>2</sup>C)</strong></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<h2 id="motor-driver-tmc6300"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg></span>&nbsp;Motor Driver - TMC6300<a class="headerlink" href="#motor-driver-tmc6300" title="Permanent link"></a></h2>
<p>The <a href="../assets/component_documentation/TMC6300.pdf">TMC6300</a> from <a href="https://www.trinamic.com/">Trinamic Motion Control</a>, part of Analog Devices, is a low voltage, 3-Phase <a href="https://en.wikipedia.org/wiki/Brushless_DC_electric_motor" title="Brushless DC">BLDC</a>/<a href="https://en.wikipedia.org/wiki/Synchronous_motor#Permanent-magnet" title="Permanent-Magnet Synchronous Motor">PMSM</a> motor driver utilizing separate high-side and low-side control signals for its three half-bridges.</p>
<div class="grid cards">
<ul>
<li>
<p>Features:</p>
<ul>
<li>VIN: 2.0V to 11.0V<ul>
<li>Operating current: 7mA</li>
<li>Standby current: 30nA</li>
</ul>
</li>
<li>VOUT: 1.8V</li>
<li>3 Half-Bridges<ul>
<li>3 High-side MOSFETs</li>
<li>3 Low-side MOSFETs</li>
</ul>
</li>
<li>I/O Supply Voltage Input</li>
<li>Diagnostic Output</li>
<li>Overtemperature Protection<ul>
<li>Shutdown Temperature: 150&deg;C</li>
<li>Typical Power Dissipation: 1W</li>
</ul>
</li>
<li>Short Protection</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details, please refer to the <a href="../assets/component_documentation/TMC6300.pdf">TMC6300 datasheet</a>.</p>
</div>
</li>
<li>
<p><figure markdown>
    <a href="../assets/img/hookup_guide/TMC6300.jpg" title="Click to enlarge"><img alt="" src="../assets/img/hookup_guide/TMC6300.jpg" width="400" /></a>
    <figcaption markdown>TMC6300 chip on the IoT Motor Driver.</figcaption>
    </figure></p>
<p>For users unfamiliar with the TMC6300 motor driver, please check out our hookup guide below.</p>
<article class="grid cards col-4" markdown  align="center">
<ul>
<li>
<p><a href="http://docs.sparkfun.com/SparkFun_Three_Phase_Motor_Driver-TMC6300/">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://docs.sparkfun.com/SparkFun_Three_Phase_Motor_Driver-TMC6300/img/hookup_guide/example-BLDC_motor.jpg" />
    </figure></p>
<hr />
<p><strong>TMC6300 BLDC Motor Driver Hookup Guide</strong></a></p>
</li>
</ul>
</article>
</li>
</ul>
</div>
<h3 id="half-bridges">Half-Bridges<a class="headerlink" href="#half-bridges" title="Permanent link"></a></h3>
<p>The TMC6300 features high-side and low-side MOSFET pairs of the three available half-bridges which control the commutation of the three motor phases.</p>
<figure>
<p><a href="../assets/img/hookup_guide/block_diagram-half_bridges.png" title="Click to enlarge"><img alt="" src="../assets/img/hookup_guide/block_diagram-half_bridges.png" width="300" /></a></p>
<figcaption>
<p>6 PWM control of a 3-phase motor commutation.<br>
(Source: Modified from the <a href="https://www.infineon.com/dgdl/Infineon-Motor_power_tool_Block_Commutation_vs_FOC-ApplicationNotes-v01_00-EN.pdf?fileId=5546d4626eab8fbf016ed37fee474a65">Block commutation vs. FOC in power tool motor control</a> application note)</p>
</figcaption>
</figure>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Input</label><label for="__tabbed_3_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The electronic commutation sequence for these MOSFETs will depend on the motor that is connected. For most cases, users will provide a PWM signal to each of these pins. <em>These are active-high pins.</em></p>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;">ESP32-WROOM</th>
<th style="text-align: center;"><code>16</code></th>
<th style="text-align: center;"><code>17</code></th>
<th style="text-align: center;"><code>18</code></th>
<th style="text-align: center;"><code>23</code></th>
<th style="text-align: center;"><code>19</code></th>
<th style="text-align: center;"><code>33</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Motor Driver</td>
<td style="text-align: center;"><code>UH</code></td>
<td style="text-align: center;"><code>UL</code></td>
<td style="text-align: center;"><code>VH</code></td>
<td style="text-align: center;"><code>VL</code></td>
<td style="text-align: center;"><code>WH</code></td>
<td style="text-align: center;"><code>WL</code></td>
</tr>
</tbody>
</table>
<p></center></p>
<details class="info">
<summary>Active High</summary>
<p>By pulling the pin high, the MOSFET will enable power to flow through that section of the half-bridge.</p>
</details>
</div>
<div class="tabbed-block">
<p>With the electronic commutation sequence provided to the half-bridges, the output motor phases will drive a connected motor.</p>
<p><figure markdown>
<a href="../assets/img/hookup_guide/motor2.jpg" title="Click to enlarge"><img alt="" src="../assets/img/hookup_guide/motor2.jpg" width="300" /></a>
<figcaption markdown>
The three motor phase outputs (<code>U</code>/<code>V</code>/<code>W</code>) from the TMC6300 are used to drive the gimbal motor, attached through the JST connector.
</figcaption>
</figure></p>
</div>
</div>
</div>
<h4 id="motor-commutation">Motor Commutation<a class="headerlink" href="#motor-commutation" title="Permanent link"></a></h4>
<p>The TMC6300 relies on an electrical <a href="https://fab.cba.mit.edu/classes/865.21/topics/power_electronics/commutation/#bldc-commutation">commutation</a> sequence/signal to drive the motor phases to a <a href="https://en.wikipedia.org/wiki/Brushless_DC_electric_motor" title="brushless DC">BLDC</a> or <a href="https://en.wikipedia.org/wiki/Synchronous_motor#Permanent-magnet" title="permanent magnet synchronous motor">PMSM</a> motor. The commutation signals for these motors are trapezoidal for BLDC motors and sinusoidal for PMSM motors.</p>
<div class="grid cards">
<ul>
<li>
<p><figure markdown>
    <a href="../assets/img/hookup_guide/commutation-trapezoidal.png" title="Click to enlarge"><img alt="" src="../assets/img/hookup_guide/commutation-trapezoidal.png" /></a>
    <figcaption markdown>
    Trapezoidal motor commutation.
    </figcaption>
    </figure></p>
</li>
<li>
<p><figure markdown>
    <a href="../assets/img/hookup_guide/commutation-sinusoidal.png" title="Click to enlarge"><img alt="" src="../assets/img/hookup_guide/commutation-sinusoidal.png" /></a>
    <figcaption markdown>
    Sinusoidal motor commutation.
    </figcaption>
    </figure></p>
</li>
</ul>
</div>
<p><center>
<em>(Source: <a href="https://www.ti.com/lit/an/slvaes1a/slvaes1a.pdf">Brushless-DC Motor Driver Considerations and Selection Guide</a> application note)</em>
</center></p>
<div class="admonition tip">
<p class="admonition-title">Gimbal Motor</p>
<p>Based on measuring the output from one of the coils, our gimbal motor is a PMSM and would require a sinusoidal waveform to drive the motor. It should be noted that a trapezodial waveform can probably be used; however, users may notice effects such as cogging.</p>
<p><figure markdown>
<a href="../assets/img/hookup_guide/pwm-sine_wave.png" title="Click to enlarge"><img alt="" src="../assets/img/hookup_guide/pwm-sine_wave.png" width="300" /></a>
<figcaption markdown>
Sinusoidal PWM signal.<br>
(Source: <a href="https://www.ti.com/lit/ml/slyp711/slyp711.pdf">Demystifying BLDC motor commutation: Trap, Sine, &amp; FOC</a>)
</figcaption>
</figure></p>
<p>For a trapezoidal signal, the high-side (HS) and low-side (LS) MOSFETs, can just be driven high or low. However, in order to approximate a sinusoidal signal, a progressively varying PWM signal must be provided with all six signals in sync with each other.</p>
</div>
<h3 id="viostandby-pin"><code>VIO</code>/Standby Pin<a class="headerlink" href="#viostandby-pin" title="Permanent link"></a></h3>
<p>In it's default configuration, the <code>VIO</code> pin is used to enable the motor driver and set the logic level voltage of the TMC6300 inputs. However, the <code>VIO</code> pin also operates as a standby pin when it is pulled <code>LOW</code>. In standby, the TMC6300 resets and sits in standby mode.</p>
<p>Users can control the <code>VIO</code> pin with <code>GPIO 05</code> on the ESP32-WROOM module, to reset the TMC6300 or put it in standby mode.</p>
<h3 id="diagnostic-pin">Diagnostic Pin<a class="headerlink" href="#diagnostic-pin" title="Permanent link"></a></h3>
<p>The diagnostic pin is triggered based on different faults <em>(i.e. shorts and overtemperature)</em> detected by the IC. By default, the status will be indicated by the, green diagnostic, <code>DIAG</code> LED and will remail <code>LOW</code> until triggered. Once triggered, users will need to disable and reset the TMC6300 or power cycle the board.</p>
<p>Users can monitor the diagnostic pin with <code>GPIO 34</code> on the ESP32-WROOM module, to determine if the TMC6300 need to be reset to clear a fault.</p>
<h3 id="current-sense-pin">Current Sense Pin<a class="headerlink" href="#current-sense-pin" title="Permanent link"></a></h3>
<p>The current sense pin is the foot point of the <code>U</code> and <code>V</code> half-bridges, with a 0.12&ohm; resistor attached. Users can measure the voltage across the resistor to determine the current flowing to the motor <em>(see the <strong><a href="#low-side-op-amp-mcp6021">Low-side Op Amp - MCP6021</a></strong> section below)</em>.</p>
<h2 id="hall-effect-sensor-tmag5273"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg></span>&nbsp;Hall-Effect Sensor - TMAG5273<a class="headerlink" href="#hall-effect-sensor-tmag5273" title="Permanent link"></a></h2>
<p>The <a href="../assets/component_documentation/TMAG5273.pdf">TMAG5273</a> from <a href="https://www.ti.com/">Texas Instruments</a>, is a 3-axis hall-effect sensor utilizing a 12-bit ADC. For more information, please refer to the <a href="../assets/component_documentation/TMAG5273.pdf">TMAG5273 datasheet</a>.</p>
<div class="grid cards col-4">
<ul>
<li>
<p>Features:</p>
<ul>
<li>I<sup>2</sup>C Address:<ul>
<li><strong>0x35 <em>(Default)</em></strong> (7-bit)</li>
<li>0x6A (write)/0x6B (read)</li>
</ul>
</li>
<li>Magnetic Range <em>(Sensitivity)</em>:<ul>
<li>&PlusMinus; 40mT <em>(820 LSB/mT)</em></li>
<li>&PlusMinus; 80mT <em>(410 LSB/mT)</em></li>
</ul>
</li>
<li>Magnetic Drift: 5%</li>
<li>Rotational Accuracy: &PlusMinus; 0.5&deg;/360&deg; rotation</li>
<li>Voltage Range: <strong>1.7 - 3.6V</strong><ul>
<li>Sleep: 5nA</li>
<li>Wake-Up/Sleep: 1µA</li>
<li>Active: 2.3mA</li>
</ul>
</li>
<li>Operating Temperature: –40 - 125&deg;C</li>
<li>Integrated temperature compensation</li>
<li>Configurable sample rate</li>
</ul>
</li>
<li>
<p><figure markdown>
    <a href="../assets/img/hookup_guide/TMAG5273.jpg" title="Click to enlarge"><img alt="Tutorial thumbnail" src="../assets/img/hookup_guide/TMAG5273.jpg" width="400" /></a>
    <figcaption markdown>The TMAG5273 hall-effect sensor on the IoT Motor Driver.</figcaption>
    </figure></p>
<div class="admonition tip">
<p class="admonition-title">Magnetic Axes</p>
<p>On the IoT Motor Driver, users will primarily be interested in magnetic field of the X-Y axes to measure the position of the gimbal motor.</p>
<p><figure markdown>
<a href="../assets/img/hookup_guide/TMAG5273_axes.png" title="Click to enlarge"><img alt="Magnetic axes" src="../assets/img/hookup_guide/TMAG5273_axes.png" width="400" /></a>
<figcaption markdown>The magnetic axes of TMAG5273 hall-effect sensor.</figcaption>
</figure></p>
</div>
</li>
</ul>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details, please refer to the <a href="../assets/component_documentation/TMAG5273.pdf">TMAG5273 datasheet</a>.</p>
</div>
<h3 id="interrupt-pin">Interrupt Pin<a class="headerlink" href="#interrupt-pin" title="Permanent link"></a></h3>
<p>The interrupt pin of the TMAG5723 can be configured in different modes to utilize either the <code>INT</code> or <code>SCL</code> pins.</p>
<ul>
<li>No interrupt</li>
<li>Interrupt through <code>INT</code></li>
<li>Interrupt through <code>INT</code> except when I2C busy</li>
<li>Interrupt through <code>SCL</code></li>
<li>Interrupt through <code>SCL</code> except when I2C busy</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We recommend utilizing the default <code>INT</code> pin to trigger interrupts; as it is already connected to <code>GPIO 04</code> of the ESP32-WROOM module.</p>
<details class="warning">
<summary>Bus Contention</summary>
<p>Texas Instruments does not recommend sharing the I<sup>2</sup>C bus with multiple devices when using the <code>SCL</code> pin for the interrupt function. The <code>SCL</code> interrupt can potentially corrupt the transactions with other devices, when present on the same I<sup>2</sup>C bus.</p>
</details>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The TMAG5273 is programmed to detect a magnetic threshold in wake-up or sleep mode. Once the magnetic threshold cross is detected, the device asserts a latched interrupt signal through the INT pin, and goes back to stand-by mode. The interrupt latch is cleared through the <code>SCL</code> pin.</p>
</div>
<h2 id="current-sensors">Current Sensors<a class="headerlink" href="#current-sensors" title="Permanent link"></a></h2>
<p>There are two different types of Op Amps on the board to amplify the input voltage for the current measurements.</p>
<ul>
<li>The INA240 is used for the in-line current measurements between the TMC6300 and the gimabal motor.</li>
<li>The MCP6021 is used on the low-side current measurement of the TMC63000's half-bridges.</li>
</ul>
<p><center></p>
<table>
<thead>
<tr>
<th style="text-align: left;"><strong>Current Sensor</strong></th>
<th style="text-align: center;">INA240 <em>(<code>U</code>)</em></th>
<th style="text-align: center;">INA240 <em>(<code>V</code>)</em></th>
<th style="text-align: center;">INA240 <em>(<code>W</code>)</em></th>
<th style="text-align: center;">MCP6021</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Analog Input</strong></td>
<td style="text-align: center;"><code>GPIO 35</code></td>
<td style="text-align: center;"><code>GPIO 36</code></td>
<td style="text-align: center;"><code>GPIO 39</code></td>
<td style="text-align: center;"><code>GPIO 32</code></td>
</tr>
</tbody>
</table>
<p></center></p>
<h3 id="inline-ina240"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg></span>&nbsp;Inline - INA240<a class="headerlink" href="#inline-ina240" title="Permanent link"></a></h3>
<p>The <a href="../assets/component_documentation/INA240.pdf">INA240</a> from <a href="https://www.ti.com/">Texas Instruments</a>, is a voltage-output, current-sense amplifier. For more information, please refer to the <a href="../assets/component_documentation/INA240.pdf">INA240 datasheet</a>.</p>
<div align="center" class="grid cards col-4">
<ul>
<li>
<p><figure markdown>
    <a href="../assets/img/hookup_guide/INA240.jpg" title="Click to enlarge"><img alt="Tutorial thumbnail" src="../assets/img/hookup_guide/INA240.jpg" width="400" /></a>
    <figcaption markdown>The INA240 current-sense amplifier on the IoT Motor Driver.</figcaption>
    </figure></p>
</li>
<li>
<p><table>
        <tr>
            <td>Configured Gain</td>
            <td>20 &PlusMn;0.2%</td>
        </tr>
        <tr>
            <td>Bandwidth</td>
            <td>100kHz</td>
        </tr>
        <tr>
            <td>Voltage Range</td>
            <td>Range: 2.7 - 5.5V</td>
        </tr>
        <tr>
            <td>Quiescent Current</td>
            <td>1.8 - 2.6mA</td>
        </tr>
        <tr>
            <td>Operating Temperature</td>
            <td>–40 - 125&deg;C</td>
        </tr>
    </table></p>
</li>
</ul>
</div>
<h3 id="low-side-op-amp-mcp6021"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg></span>&nbsp;Low-side Op Amp - MCP6021<a class="headerlink" href="#low-side-op-amp-mcp6021" title="Permanent link"></a></h3>
<p>The <a href="../assets/component_documentation/MCP6021.pdf">MCP6021</a> from <a href="https://www.microchip.com/">Microchip Technology, Inc.</a>, is a rail-to-rail input and output operational amplifier. The chip . For more information, please refer to the <a href="../assets/component_documentation/MCP6021.pdf">MCP6021 datasheet</a>.</p>
<div align="center" class="grid cards col-4">
<ul>
<li>
<p><figure markdown>
    <a href="../assets/img/hookup_guide/MCP6021.jpg" title="Click to enlarge"><img alt="Tutorial thumbnail" src="../assets/img/hookup_guide/MCP6021.jpg" width="400" /></a>
    <figcaption markdown>The MCP6021 Op Amp on the IoT Motor Driver.</figcaption>
    </figure></p>
</li>
<li>
<p><table>
        <tr>
            <td>Configured Gain</td>
            <td>21</td>
        </tr>
        <tr>
            <td>Bandwidth</td>
            <td>10MHz</td>
        </tr>
        <tr>
            <td>Voltage Range</td>
            <td>Range: 2.5 - 5.5V</td>
        </tr>
        <tr>
            <td>Quiescent Current</td>
            <td>0.5 - 1.35mA</td>
        </tr>
        <tr>
            <td>Operating Temperature</td>
            <td>–40 - 125&deg;C</td>
        </tr>
    </table></p>
</li>
</ul>
</div>
<h2 id="status-leds">Status LEDs<a class="headerlink" href="#status-leds" title="Permanent link"></a></h2>
<p>There are five status LEDs on the TMC6300 motor driver:</p>
<ul>
<li><code>PWR</code> - Power <em>(Red)</em><ul>
<li>Turns on once power is supplied through the USB-C connector</li>
</ul>
</li>
<li><code>MPWR</code> - Power <em>(Red)</em><ul>
<li>Turns on once power is supplied through the USB-C connector</li>
</ul>
</li>
<li><code>DIAG</code> - Diagnostics <em>(Green)</em><ul>
<li>Turns on to indicate a fault <em>(see <a href="#diagnostic-pin">diagnostic pin</a> section)</em></li>
</ul>
</li>
<li><code>STBY</code> - Standby <em>(Blue)</em><ul>
<li>Turns on when the motor driver is enabled</li>
<li>Turns off, when the IC has been reset and the motor driver is in standby mode</li>
</ul>
</li>
<li><code>STAT</code> - User <em>(RGB)</em><ul>
<li>Controlled through <code>GPIO 02</code></li>
</ul>
</li>
</ul>
<figure>
<p><a href="../assets/img/hookup_guide/LEDs.jpg" title="Click to enlarge"><img alt="" src="../assets/img/hookup_guide/LEDs.jpg" width="400" /></a></p>
<figcaption>
<p>The status indicator LEDs on the TMC6300 motor driver.</p>
</figcaption>
</figure>
<h3 id="ws2812-rgb-led">WS2812 RGB LED<a class="headerlink" href="#ws2812-rgb-led" title="Permanent link"></a></h3>
<p>The WS2812 RGB LED is controlled with a 24-bit (GRB) data signal. This indicator is connected to <code>GPIO 02</code> and the digital output pin from the LED is available through a test point. For more information, please refer to the <a href="../assets/component_documentation/WS2812.pdf">WS2812C datasheet</a>.</p>
<figure>
<p><a href="../assets/img/hookup_guide/LED-WS2812.jpg" title="Click to enlarge"><img alt="" src="../assets/img/hookup_guide/LED-WS2812.jpg" width="400" /></a></p>
<figcaption>
<p>The status indicator LED (<code>STAT</code>)on the IoT Motor Driver.</p>
</figcaption>
</figure>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The latest ESP32 Arduino core, now provides a basic RGB LED driver for a WS2812 <em>(or NeoPixel)</em> LED populated the board. For an example of how to utilize the RGB LED driver check out the <a href="https://github.com/espressif/arduino-esp32/blob/master/libraries/ESP32/examples/GPIO/BlinkRGB/BlinkRGB.ino">BlinkRGB example code</a>, which can be accessed from the File drop down menu <em>(i.e <strong>File</strong> &gt; <strong>Examples</strong> &gt; <strong>ESP32</strong> &gt; <strong>GPIO</strong> &gt; <strong>BlinkRGB</strong>)</em>.</p>
</div>
<h2 id="buttons">Buttons<a class="headerlink" href="#buttons" title="Permanent link"></a></h2>
<p>There are four buttons on IoT Motor Driver: <span class="keys"><kbd>RST</kbd></span>, <span class="keys"><kbd>BOOT</kbd></span>, <span class="keys"><kbd>13</kbd></span>, and <span class="keys"><kbd>14</kbd></span> buttons.</p>
<figure>
<p><a href="../assets/img/hookup_guide/buttons.jpg" title="Click to enlarge"><img alt="Buttons" src="../assets/img/hookup_guide/buttons.jpg" width="400" /></a></p>
<figcaption>
<p>Buttons on the IoT Motor Driver.</p>
</figcaption>
</figure>
<details class="tip">
<summary>Factory Programming</summary>
<p>The IoT Motor Driver board will come pre-programmed out of the bag. By default, the <span class="keys"><kbd>13</kbd></span>/<span class="keys"><kbd>14</kbd></span> buttons can be used to operate the motor:</p>
<ul>
<li><span class="keys"><kbd>13</kbd></span> - Start/Stop the motor's rotation</li>
<li><span class="keys"><kbd>14</kbd></span> - Switch the direction that the motor is spinning</li>
</ul>
</details>
<h4 id="reset-button">Reset Button<a class="headerlink" href="#reset-button" title="Permanent link"></a></h4>
<p>The <span class="keys"><kbd>RST</kbd></span> <em>(reset)</em> button allows users to reset the program running on the ESP32-WROOM module without unplugging the board.</p>
<figure>
<p><a href="../assets/img/hookup_guide/button_reset.jpg" title="Click to enlarge"><img alt="Reset Button" src="../assets/img/hookup_guide/button_reset.jpg" width="400" /></a></p>
<figcaption>
<p><span class="keys"><kbd>RST</kbd></span> button on the IoT Motor Driver.</p>
</figcaption>
</figure>
<h4 id="boot-control">Boot Control<a class="headerlink" href="#boot-control" title="Permanent link"></a></h4>
<p>The <span class="keys"><kbd>BOOT</kbd></span> button can be used to force the board into the serial bootloader. Holding down the <span class="keys"><kbd>BOOT</kbd></span> button, while connecting the board to a computer through its USB-C connector or resetting the board will cause it to enter the <a href="https://docs.espressif.com/projects/esptool/en/latest/esp32/advanced-topics/boot-mode-selection.html#manual-bootloader">Firmware Download mode</a>. The board will remain in this mode until it power cycles (happens automatically after uploading new firmware) or the <span class="keys"><kbd>RST</kbd></span> button is pressed.</p>
<ol>
<li>Hold the <span class="keys"><kbd>BOOT</kbd></span> button down.</li>
<li>Reset the MCU.<ul>
<li>While unpowered, connect the board to a computer with through the USB-C connection.</li>
<li>While powered, press the <span class="keys"><kbd>RST</kbd></span> button.</li>
</ul>
</li>
<li>Release the <span class="keys"><kbd>BOOT</kbd></span> button.</li>
<li>After programming is completed, reboot the MCU.<ul>
<li>Press the <span class="keys"><kbd>RST</kbd></span> button.</li>
<li>Power cycle the board.</li>
</ul>
</li>
</ol>
<figure>
<p><a href="../assets/img/hookup_guide/buttons_boot_control.jpg" title="Click to enlarge"><img alt="Boot Button" src="../assets/img/hookup_guide/buttons_boot_control.jpg" width="400" /></a></p>
<figcaption>
<p><span class="keys"><kbd>BOOT</kbd></span> button on the IoT Motor Driver.</p>
</figcaption>
</figure>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><strong>&#9889;</strong> The <span class="keys"><kbd>BOOT</kbd></span> button is also connected to <code>GPIO 0</code>.</p>
</div>
<h3 id="user-buttons">User Buttons<a class="headerlink" href="#user-buttons" title="Permanent link"></a></h3>
<p>The <span class="keys"><kbd>13</kbd></span> and <span class="keys"><kbd>14</kbd></span> buttons are available for users to configure for their own purposes.</p>
<figure>
<p><a href="../assets/img/hookup_guide/buttons_user_pins.jpg" title="Click to enlarge"><img alt="User Buttons" src="../assets/img/hookup_guide/buttons_user_pins.jpg" width="400" /></a></p>
<figcaption>
<p>The user buttons (<span class="keys"><kbd>13</kbd></span> and <span class="keys"><kbd>14</kbd></span>) on the IoT Motor Driver.</p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Factory Programming</p>
<p>The IoT Motor Driver board will come pre-programmed out of the bag. By default, these buttons can be used to operate the motor:</p>
<ul>
<li><span class="keys"><kbd>13</kbd></span> - Start/Stop the motor's rotation</li>
<li><span class="keys"><kbd>14</kbd></span> - Switch the direction that the motor is spinning</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When utilizing the buttons, users should enable the internal pull-up resistors for the GPIO pins.</p>
</div>
<h2 id="jumpers">Jumpers<a class="headerlink" href="#jumpers" title="Permanent link"></a></h2>
<details class="note">
<summary>Never modified a jumper before?</summary>
<p>Check out our <a href="https://learn.sparkfun.com/tutorials/664">Jumper Pads and PCB Traces tutorial</a> for a quick introduction!</p>
<div class="grid cards col-4" markdown align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/664">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/6/6/4/PCB_TraceCutLumenati.jpg" />
    </figure></p>
<hr />
<p><strong>How to Work with Jumper Pads and PCB Traces</strong></a></p>
</li>
</ul>
</div>
</details>
<p>There are nine jumpers on the back of the board that can be used to easily modify a hardware connections on the board.</p>
<ul>
<li><strong>SHLD</strong> - This jumper can be used to disconnect the shield of the USB-C connector from <code>GND</code>.</li>
<li><strong>MEAS</strong> - This jumper can be used to measure the current consumption of the board.</li>
<li><strong>BYP</strong> - This jumper can be used to bypass the thermal fuse.</li>
<li>LED Jumpers<ul>
<li><strong>PWR</strong> - This jumper can be used to remove power from the red, power LED on the AP2112 LDO regulator.</li>
<li><strong>MPWR</strong> - This jumper can be used to remove power from the red, power LED on the AP63357 LDO regulator.</li>
<li><strong>STBY</strong> - This jumper can be used to remove power from the blue, standby LED.</li>
<li><strong>DIAG</strong> - This jumper can be used to remove power from the green, diagnostic LED.</li>
</ul>
</li>
<li><strong>INT</strong> - This jumper can be used to remove the pull-up resistor from the <code>INT</code> pin of the hall-effect sensor.</li>
<li><strong>I2C</strong> - This jumper can be used to remove the pull-up resistors on the I<sup>2</sup>C bus.</li>
</ul>
<figure>
<p><a href="../assets/img/hookup_guide/jumpers.jpg" title="Click to enlarge"><img alt="Jumpers" src="../assets/img/hookup_guide/jumpers.jpg" width="400" /></a></p>
<figcaption>
<p>The jumpers on the back of the IoT Motor Driver.</p>
</figcaption>
</figure>
<h2 id="primary-i2c-bus">Primary I<sup>2</sup>C Bus<a class="headerlink" href="#primary-i2c-bus" title="Permanent link"></a></h2>
<p>The Qwiic connector and hall-effect sensor are attached to the primary I<sup>2</sup>C bus. The primary I<sup>2</sup>C bus for this board utilizes the pin connections, detailed in the table below:</p>
<figure>
<p><a href="../assets/img/hookup_guide/i2c_connections.jpg" title="Click to enlarge"><img alt="I2C connections" src="../assets/img/hookup_guide/i2c_connections.jpg" width="400" /></a></p>
<figcaption>
<p>I<sup>2</sup>C bus connections on the IoT Motor Driver.</p>
</figcaption>
</figure>
<p><center>
    <table>
        <tr>
            <th style="text-align:center">
                Connection
            </th>
            <td align="center"><code>VDD</code></td>
            <td align="center"><code>GND</code></td>
            <td align="center"><code>SCL</code></td>
            <td align="center"><code>SDA</code></td>
        </tr>
        <tr>
            <th style="text-align:center; vertical-align:middle">
                Hall-Effect Sensor<br>
                <i>(TMAG5273)</i>
            </th>
            <td style="text-align:center; vertical-align:middle"><code>3V3</code></td>
            <td style="text-align:center; vertical-align:middle"><b>GND</b></td>
            <td style="text-align:center; vertical-align:middle"><code>GPIO 22</code></td>
            <td style="text-align:center; vertical-align:middle"><code>GPIO 21</code></td>
        </tr>
        <tr>
            <th style="text-align:center; vertical-align:middle">
                Qwiic Connector
            </th>
            <td style="text-align:center; vertical-align:middle"><code>3V3</code></td>
            <td style="text-align:center; vertical-align:middle"><b>GND</b></td>
            <td style="text-align:center; vertical-align:middle"><code>GPIO 22</code></td>
            <td style="text-align:center; vertical-align:middle"><code>GPIO 21</code></td>
        </tr>
    </table>
</center></p>

<h3 id="qwiic-connector">Qwiic Connector<a class="headerlink" href="#qwiic-connector" title="Permanent link"></a></h3>
<p>A Qwiic connector is provided for users to seamlessly integrate with <a href="https://www.sparkfun.com/qwiic">SparkFun's Qwiic Ecosystem</a>. Otherwise, users can connect their I<sup>2</sup>C devices through the PTH pins broken out on the board.</p>
<figure>
<p><a href="../assets/img/hookup_guide/i2c_qwiic.jpg" title="Click to enlarge"><img alt="Qwiic connector and I2C pins" src="../assets/img/hookup_guide/i2c_qwiic.jpg" width="400" /></a></p>
<figcaption>
<p>Qwiic connector and I<sup>2</sup>C pins on the IoT Motor Driver.</p>
</figcaption>
</figure>
<details class="tip">
<summary>What is Qwiic?</summary>
<p><!-- Qwiic Banner -->
<center>
<a href="https://www.sparkfun.com/qwiic"><img alt="Qwiic Logo - light theme" src="../assets/img/qwiic_logo-light.png#only-light" width="400" /></a>
<a href="https://www.sparkfun.com/qwiic"><img alt="Qwiic Logo - dark theme" src="../assets/img/qwiic_logo-dark.png#only-dark" width="400" /></a>
</center></p>
<hr />
<p>The <a href="https://www.sparkfun.com/qwiic">Qwiic connect system</a> is a solderless, polarized connection system that allows users to seamlessly daisy chain I<sup>2</sup>C boards together. Play the video below to learn more about the Qwiic connect system or click on the banner above to learn more about <a href="https://www.sparkfun.com/qwiic">Qwiic products</a>.</p>
<p><center>
<div class="video">
<iframe src="https://www.youtube.com/embed/x0RDEHqFIF8" title="SparkFun's Qwiic Connect System" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</center></p>
<div class="admonition info">
<p class="admonition-title">Features of the Qwiic System</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">No Soldering</label><label for="__tabbed_4_2">Polarized Connector</label><label for="__tabbed_4_3">Daisy Chain-able</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><img align="left" alt="no soldering - light theme" src="../assets/img/no_soldering-light.png#only-light" width="90" />
<img align="left" alt="no soldering - dark theme" src="../assets/img/no_soldering-dark.png#only-dark" width="90" /></p>
<p>Qwiic cables (4-pin JST) plug easily from development boards to sensors, shields, accessory boards and more, making easy work of setting up a new prototype.</p>
</div>
<div class="tabbed-block">
<p><img align="left" alt="polarized connector - light theme" src="../assets/img/polarized_connector-light.png#only-light" width="90" />
<img align="left" alt="polarized connector - dark theme" src="../assets/img/polarized_connector-dark.png#only-dark" width="90" /></p>
<p>There's no need to worry about accidentally swapping the SDA and SCL wires on your breadboard. The Qwiic connector is polarized so you know you’ll have it wired correctly  every time, right from the start.</p>
<p>The PCB connector is part number SM04B-SRSS (<a href="https://cdn.sparkfun.com/assets/parts/1/2/2/8/9/Qwiic_Connector_Datasheet.pdf">Datasheet</a>) or equivalent. The mating connector used on cables is part number SHR04V-S-B or an equivalent <em>(1mm pitch, 4-pin JST connector)</em>.</p>
</div>
<div class="tabbed-block">
<p><img align="left" alt="daisy chainable - light theme" src="../assets/img/daisy_chainable-light.png#only-light" width="90" />
<img align="left" alt="daisy chainable - dark theme" src="../assets/img/daisy_chainable-dark.png#only-dark" width="90" /></p>
<p>It’s time to leverage the power of the I<sup>2</sup>C bus! Most Qwiic boards will have two or more connectors on them, allowing multiple devices to be connected.</p>
</div>
</div>
</div>
</div>
</details>
<h1 id="hardware-assembly">Hardware Assembly<a class="headerlink" href="#hardware-assembly" title="Permanent link"></a></h1>
<h2 id="usb-programming">USB Programming<a class="headerlink" href="#usb-programming" title="Permanent link"></a></h2>
<p>The USB connection is utilized for programming and serial communication. Users only need to plug their IoT Motor Driver into a computer using a USB-C cable.</p>
<figure>
<p><a href="../assets/img/hookup_guide/assembly_usb.jpg" title="Click to enlarge"><img alt="IoT Motor Driver USB connection" src="../assets/img/hookup_guide/assembly_usb.jpg" width="400" /></a></p>
<figcaption>
<p>The IoT Motor Driver with USB-C cable attached.</p>
</figcaption>
</figure>
<h2 id="headers">Headers<a class="headerlink" href="#headers" title="Permanent link"></a></h2>
<details class="note">
<summary>New to soldering?</summary>
<p>If you have never soldered before or need a quick refresher, check out our <a href="https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering">How to Solder: Through-Hole Soldering</a> guide.</p>
<div class="grid cards col-4" markdown  align="center">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/5">
    <figure markdown>
    <img alt="Tutorial thumbnail" src="https://cdn.sparkfun.com/c/264-148/assets/e/3/9/9/4/51d9fbe1ce395f7a2a000000.jpg" />
    </figure></p>
<hr />
<p><strong>How to Solder: Through-Hole Soldering</strong></a></p>
</li>
</ul>
</div>
</details>
<p>The pins for the IoT Motor Driver are broken out into 0.1"-spaced pins on the outer edges of the board. When selecting headers, be sure you are aware of the functionality you require.</p>
<figure>
<p><a href="../assets/img/hookup_guide/assembly_headers.jpg" title="Click to enlarge"><img alt="Soldering headers" src="../assets/img/hookup_guide/assembly_headers.jpg" width="400" /></a></p>
<figcaption>
<p>Soldering headers to the IoT Motor Driver.</p>
</figcaption>
</figure>
<h3 id="qwiic-devices">Qwiic Devices<a class="headerlink" href="#qwiic-devices" title="Permanent link"></a></h3>
<p>The Qwiic system allows users to effortlessly prototype with a Qwiic compatible I<sup>2</sup>C device without soldering. Users can attach any Qwiic compatible <a href="https://www.sparkfun.com/qwiic#sensors">sensor or board</a>, with just a <a href="https://www.sparkfun.com/products/15081">Qwiic cable</a>. (<em>*The example below, is for demonstration purposes and is not pertinent to the board functionality or this tutorial.</em>)</p>
<figure>
<p><a href="../assets/img/hookup_guide/assembly_qwiic.jpg" title="Click to enlarge"><img alt="Qwiic devices connected to IoT Motor Driver" src="../assets/img/hookup_guide/assembly_qwiic.jpg" width="400" /></a></p>
<figcaption>
<p>The <a href="https://www.sparkfun.com/products/19096">BME688 environmental</a> and <a href="https://www.sparkfun.com/products/14722">VL53L1X distance</a> Qwiic sensor boards connected to the IoT Motor Driver.</p>
</figcaption>
</figure>
<h1 id="software-overview">Software Overview<a class="headerlink" href="#software-overview" title="Permanent link"></a></h1>
<h2 id="ch340-driver">CH340 Driver<a class="headerlink" href="#ch340-driver" title="Permanent link"></a></h2>
<p>Users will need to install the appropriate driver for their computer to recognize the serial-to-UART chip on their board/adapter. Most of the latest operating systems will recognize the CH340C chip on the board and automatically install the required driver.</p>
<p><em>To manually install the CH340 driver on their computer, users can download it from the <a href="http://www.wch-ic.com/products/CH340.html?">WCH website</a>. For more information, check out our <a href="https://www.sparkfun.com/ch340">How to Install CH340 Drivers Tutorial</a>.</em></p>
<figure>
<p><a href="https://learn.sparkfun.com/tutorials/908"><img alt="How to Install CH340 Drivers" src="https://cdn.sparkfun.com/c/500-282/assets/learn_tutorials/9/0/8/USB-to-serial_converter_CH340-closeup.jpg" /></a></p>
<figcaption>
<p><a href="https://learn.sparkfun.com/tutorials/908"><strong>How to Install CH340 Drivers</strong></a></p>
</figcaption>
</figure>
<h2 id="arduino-ide">Arduino IDE<a class="headerlink" href="#arduino-ide" title="Permanent link"></a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For first-time users, who have never programmed before and are looking to use the Arduino IDE, we recommend beginning with the <a href="https://www.sparkfun.com/products/15631">SparkFun Inventor's Kit (SIK)</a>, which is designed to help users get started programming with the Arduino IDE.</p>
</div>
<p>Most users may already be familiar with the Arduino IDE and its use. However, for those of you who have never heard the name <em>Arduino</em> before, feel free to check out the <a href="https://www.arduino.cc/en/Guide/HomePage">Arduino website</a>. To get started with using the Arduino IDE, check out our tutorials below:</p>
<div align="center" class="grid cards">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/50"><figure markdown>
    <img alt="What is an Arduino?" src="https://cdn.sparkfun.com/c/264-148/assets/3/b/6/e/b/512e66bece395f492b000000.jpg" />
    </figure></p>
<hr />
<p><strong>What is an Arduino?</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/61"><figure markdown>
    <img alt="Installing the Arduino IDE" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/6/1/arduinoThumb.jpg" />
    </figure></p>
<hr />
<p><strong>Installing the Arduino IDE</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/15"><figure markdown>
    <img alt="Installing an Arduino Library" src="https://cdn.sparkfun.com/c/264-148/assets/b/e/4/b/2/50f04b99ce395fd95e000001.jpg" />
    </figure></p>
<hr />
<p><strong>Installing an Arduino Library</strong></a></p>
</li>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/1265"><figure markdown>
    <img alt="Installing Board Definitions in the Arduino IDE" src="https://cdn.sparkfun.com/c/264-148/assets/learn_tutorials/1/2/6/5/sparkfun_boards.PNG" />
    </figure></p>
<hr />
<p><strong>Installing Board Definitions in the Arduino IDE</strong></a></p>
</li>
</ul>
</div>
<h3 id="install-board-definition">Install Board Definition<a class="headerlink" href="#install-board-definition" title="Permanent link"></a></h3>
<p>Install the latest <b>ESP32</b> board definitions in the Arduino IDE.</p>
<p><center>
<a href="https://learn.sparkfun.com/tutorials/1265"><img alt="Installing Board Definitions in the Arduino IDE" src="https://cdn.sparkfun.com/c/500-282/assets/learn_tutorials/1/2/6/5/sparkfun_boards.PNG" /></a><br>
<a href="https://learn.sparkfun.com/tutorials/1265"><strong>Installing Board Definitions in the Arduino IDE</strong></a>
</center></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more instructions, users can follow this tutorial on <a href="https://docs.arduino.cc/learn/starting-guide/cores">Installing Additional Cores</a> provided by Arduino. Users will also need the <code>.json</code> file for the Espressif Arduino core:</p>
<div class="highlight"><pre><span></span><code>https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
</code></pre></div>
</div>
<p>When selecting a board to program in the Arduino IDE, users should select the <strong>SparkFun ESP32 Thing Plus C</strong> from the <code>Tools</code> drop-down menu <em>(_i.e. <strong>Tools</strong> &gt; <strong>Board</strong> &gt; <strong>ESP32 Arduino</strong> &gt; <strong>SparkFun ESP32 Thing Plus C</strong>).</em> Alternatively, users can also select the <strong>ESP32 Dev Module</strong>; however, they may lose some pin assignments.</p>
<figure>
<p><a href="../assets/img/hookup_guide/board_selection.png"><img alt="" src="../assets/img/hookup_guide/board_selection.png" title="Click to enlarge" width="400" /></a></p>
<figcaption>
<p>Select the <strong>SparkFun ESP32 Thing Plus C</strong> from the <code>Tools</code> drop-down menu in the Arduino IDE.</p>
</figcaption>
</figure>
<details class="info">
<summary>Arduino IDE 2.x.x - <em>Alternative Method</em></summary>
<p>In the newest version of the Arduino IDE 2.<code>x</code>.<code>x</code>, users can also select their board (<em>green</em>) and port (<em>blue</em>) from the <code>Select Board &amp; Port</code> dropdown menu (<em>yellow</em>).</p>
<p><figure markdown>
<a href="../assets/img/hookup_guide/board_selection-alt.png"><img alt="" src="../assets/img/hookup_guide/board_selection-alt.png" title="Click to enlarge" width="400" /></a>
<figcaption markdown>Selecting the <strong>SparkFun ESP32 Thing Plus C</strong> and <strong>COM5</strong> port from the <strong>Select Board &amp; Port</strong> drop-down menu in the Arduino IDE (v2.0.3).</figcaption>
</figure></p>
</details>
<!-- Comment Out

??? tip "Arduino IDE *(v1.x.x)*"
    In the Arduino IDE v1.x.x, users will select the **SparkFun ESP32 Thing Plus C** from the `Tools` drop-down menu _(_i.e. **Tools** > **Board** > **ESP32 Arduino** > **SparkFun ESP32 Thing Plus C**)._

    <figure markdown>
    [![](./assets/img/hookup_guide/board_selection-legacy.png "Click to enlarge"){ width="400" }](./assets/img/hookup_guide/board_selection-legacy.png)
    <figcaption markdown>Selecting the **SparkFun ESP32 Thing Plus C** from the **Tools** drop-down menu in the Arduino IDE (v1.8.19).</figcaption>
    </figure>
-->

<h2 id="sparkfun-tmag5273-arduino-library">SparkFun TMAG5273 Arduino Library<a class="headerlink" href="#sparkfun-tmag5273-arduino-library" title="Permanent link"></a></h2>
<p>The <a href="https://github.com/sparkfun/SparkFun_TMAG5273_Arduino_Library">SparkFun TMAG5273 Arduino Library</a> can be installed from the library manager in the Arduino IDE.</p>
<figure>
<p><a href="../assets/img/hookup_guide/TMAG5273_library.png"><img alt="" src="../assets/img/hookup_guide/TMAG5273_library.png" title="Click to enlarge" width="400" /></a></p>
<figcaption>
<p>SparkFun TMAG5273 Arduino library in the library manager of the Arduino IDE.</p>
</figcaption>
</figure>
<details class="tip">
<summary>Arduino IDE <em>(v1.x.x)</em></summary>
<p>In the Arduino IDE v1.x.x, the library manager will have the following appearance for the SimpleFOC library:</p>
<p><figure markdown>
<a href="../assets/img/hookup_guide/TMAG5273_library-legacy.png"><img alt="" src="../assets/img/hookup_guide/TMAG5273_library-legacy.png" title="Click to enlarge" width="400" /></a>
<figcaption markdown>SparkFun TMAG5273 Arduino library in the library managerof the Arduino IDE (v1.x.x).</figcaption>
</figure></p>
</details>
<p>This library will be primarily used to interact with the TMAG5273 hall-effect sensor and return the rotation angle of the motor.</p>
<h2 id="simplefoc-arduino-library">SimpleFOC Arduino Library<a class="headerlink" href="#simplefoc-arduino-library" title="Permanent link"></a></h2>
<p>The <a href="https://github.com/simplefoc/Arduino-FOC">Simple Field Oriented Control Library</a> can be installed from the library manager in the Arduino IDE.</p>
<figure>
<p><a href="../assets/img/hookup_guide/FOC_library.png"><img alt="" src="../assets/img/hookup_guide/FOC_library.png" title="Click to enlarge" width="400" /></a></p>
<figcaption>
<p>SimpleFOC library in the library manager of the Arduino IDE.</p>
</figcaption>
</figure>
<details class="tip">
<summary>Arduino IDE <em>(v1.x.x)</em></summary>
<p>In the Arduino IDE v1.x.x, the library manager will have the following appearance for the SimpleFOC library:</p>
<p><figure markdown>
<a href="../assets/img/hookup_guide/FOC_library-legacy.png"><img alt="" src="../assets/img/hookup_guide/FOC_library-legacy.png" title="Click to enlarge" width="400" /></a>
<figcaption markdown>SimpleFOC library in the library manager of the Arduino IDE (v1.x.x).</figcaption>
</figure></p>
</details>
<p>This library utilizes a motor control scheme called field oriented control (FOC), which can utilize a feedback control loop to drive a motor with a higher power efficiency and precision characteristics, like evenly distributed torque control.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details about the library, check out the <a href="https://docs.simplefoc.com/">online documentation</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Supported Hardware</p>
<p>For a detailed and up-to-date list of the hardware supported by this library, check out the <a href="https://docs.simplefoc.com/supported_hardware">library's documentation</a>. The following are excerpts taken from the library's documentation page:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Microcontrollers</label><label for="__tabbed_5_2">Motor Drivers</label><label for="__tabbed_5_3">Motors</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Arduino <span class="simple">Simple<span class="foc">FOC</span>library</span> supports:</p>
<table>
<thead>
<tr>
<th>MCU</th>
<th>2 PWM mode</th>
<th>4 PWM mode</th>
<th>3 PWM mode</th>
<th>6 PWM mode</th>
<th>pwm frequency config</th>
</tr>
</thead>
<tbody>
<tr>
<td>Arduino (8-bit)</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️ (either 4kHz or 32kHz)</td>
</tr>
<tr>
<td>Arduino DUE</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
<td>✔️</td>
</tr>
<tr>
<td>stm32</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
</tr>
<tr>
<td>esp32 MCPWM</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
</tr>
<tr>
<td>esp32 LEDC</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
<td>✔️</td>
</tr>
<tr>
<td>esp8266</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
<td>✔️</td>
</tr>
<tr>
<td>samd21/51</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
</tr>
<tr>
<td>teensy</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
</tr>
<tr>
<td>Raspberry Pi Pico</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
</tr>
<tr>
<td>Portenta H7</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
<td>✔️</td>
</tr>
<tr>
<td>nRF52</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
</tr>
</tbody>
</table>
<p>From this table you can see that if you need the 6 PWM mode for your application you should avoid using Teensy and Arduino DUE boards for now.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details, please refer to the <a href="https://docs.simplefoc.com/microcontrollers">SimpleFOC Arduino library documentation</a>.</p>
</div>
</div>
<div class="tabbed-block">
<p>Arduino <span class="simple">Simple<span class="foc">FOC</span>library</span> has a goal to support as many BLDC and stepper motor drivers as possible. Till this moment there are two kinds of motor drivers supported by this library:</p>
<ul>
<li><a href="bldc_drivers">BLDC motor driver <i class="fa fa-external-link"></i></a><ul>
<li><strong>3 PWM signals</strong> ( 3 phase )</li>
<li><strong>6 PWM signals</strong> ( 3 phase )</li>
</ul>
</li>
</ul>
<details class="warning">
<summary>Current Limitations</summary>
<p>Before running any BLDC motor with the <span class="simple">Simple<span class="foc">FOC</span>library</span> please make sure your hardware can handle the currents your motor requires. </p>
<p>The simplest way to do it is by checking the motor phase resistance <code>R</code>. Either check the datasheet of your motor and search for the resistance value or measure it yourself using a multimeter. Then check the value of your power supply voltage <code>V_dc</code> and once when you have the values you can find the maximum current <code>I_max</code> value by calculating:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">I_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">V_dc</span><span class="o">/</span><span class="n">R</span>
</code></pre></div>
Finally check the value of the maximum current <code>I_max</code> with the datasheet of your driver board. If the <code>I_max</code> is too high you can lower the power supply voltage <code>V_dc</code> in order prevent too high peaks of the current. If you are not able to change your power supply voltage you can limit the voltage set to motor in software. 
<blockquote class="warning">
    <p class="heading">NOTE</p>
    The equation above calculates the worst case maximum current <code class="highlighter-rouge">I_max</code> and in most cases calculated <code class="highlighter-rouge">I_max</code> is higher than the actual value. Maximum current depends both of the motor hardware such as winding configuration and the control algorithm.<br />
</blockquote></p>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>While the TMC6300 isn't directly listed as part of the supported hardware for the SimpleFOC Arduino library, we have verified that is compatible with the library.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details, please refer to the <a href="https://docs.simplefoc.com/bldc_drivers">SimpleFOC Arduino library documentation</a>.</p>
</div>
</div>
<div class="tabbed-block">
<p>Arduino SimpleFOClibrary supports two types of BLDC motors:</p>
<ul>
<li>
<p>BLDC motors</p>
<ul>
<li>
<p>3 phase (3 wire):</p>
<details class="info">
<summary>Gimbal Motors</summary>
<p>Gimbal motors will work basically with any BLDC motor driver, but since the high-performance drivers have current measurement circuits optimized for high currents you will not have any benefit of using them. Therefore low-power BLDC motor drivers will have comparable performance as the expensive high-power, high-performance drivers for gimbal motors. What is in my opinion very cool! 😃 This was one of the main motivations to start developing  <span class="simple">Simple<span class="foc">FOC</span>Shield</span>.</p>
<p>Some of the characteristics of Gimbal motors are:</p>
<ul>
<li>High torque on low velocities</li>
<li>Very smooth operation</li>
<li>Internal resistance &gt;10Ω</li>
<li>Currents up to 5A</li>
</ul>
<p>Gimbal motors are very versatile and their main benefit is very smooth operation on low speeds and high torque. They can be used in may different applications everywhere from being a high-quality replacement for your stepper motor or DC servo motor to very smooth camera gimbals and many different robotics applications. One of very interesting use cases are student experiments, where BLDC motors provide a very high degree of control and dynamics, such examples are ball and plate,  inverted pendulums, balancing robots and similar. </p>
</details>
<details class="info">
<summary>High-performance Motors</summary>
<p>Gimbal motors are just a subset of all the BLDC motors there is. As suggested in previous chapters, when using high-torque ( currents &gt; 5A), low-resistance (~1Ω) BLDC motors such as drone motors make sure your BLDC driver can support the currents necessary. <span class="simple">Simple<span class="foc">FOC</span>library</span> has been tested with several high performance BLDC drivers (<a href="drivers">supported BLDC drivers list</a>). </p>
</details>
</li>
</ul>
</li>
<li>
<p>Stepper motors</p>
<ul>
<li>2 phase (4 wire)</li>
</ul>
</li>
</ul>
<details class="warning">
<summary>Current Limitations</summary>
<p>Before running any BLDC motor with the <span class="simple">Simple<span class="foc">FOC</span>library</span> please make sure your hardware can handle the currents your motor requires. </p>
<p>The simplest way to do it is by checking the motor phase resistance <code>R</code>. Either check the datasheet of your motor and search for the resistance value or measure it yourself using a multimeter. Then check the value of your power supply voltage <code>V_dc</code> and once when you have the values you can find the maximum current <code>I_max</code> value by calculating:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">I_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">V_dc</span><span class="o">/</span><span class="n">R</span>
</code></pre></div>
Finally check the value of the maximum current <code>I_max</code> with the datasheet of your driver board. If the <code>I_max</code> is too high you can lower the power supply voltage <code>V_dc</code> in order prevent too high peaks of the current. If you are not able to change your power supply voltage you can limit the voltage set to motor in software. 
<blockquote class="warning">
    <p class="heading">NOTE</p>
    The equation above calculates the worst case maximum current <code class="highlighter-rouge">I_max</code> and in most cases calculated <code class="highlighter-rouge">I_max</code> is higher than the actual value. Maximum current depends both of the motor hardware such as winding configuration and the control algorithm.<br />
</blockquote></p>
</details>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details, please refer to the <a href="https://docs.simplefoc.com/bldc_motors">SimpleFOC Arduino library documentation</a>.</p>
</div>
</div>
</div>
</div>
</div>
<h3 id="6pwm-motor-driver">6PWM Motor Driver<a class="headerlink" href="#6pwm-motor-driver" title="Permanent link"></a></h3>
<p>Users will need to utilize the <a href="https://docs.simplefoc.com/bldcdriver6pwm"><code>BLDCDriver6PWM</code> class</a> to provide the six PWM signals required for the TMC6300 motor driver.</p>
<dl>
<dt><code>BLDCDriver6PWM</code></dt>
<dd>
<p>This class provides an abstraction layer for most of the common BLDC drivers, which require six PWM signals. This method offers more control than a three PWM motor drivers, since each of the 6 half-bridges MOSFETs can be controlled independently.</p>
<p>To create the interface to the BLDC driver you need to specify the 6 <code>PWM</code> pin numbers for each motor phase and optionally <code>enable</code> pin.
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">//  BLDCDriver6PWM( int phA_h, int phA_l, int phB_h, int phB_l, int phC_h, int phC_l, int en)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1">//  - phA_h, phA_l - A phase pwm pin high/low pair </span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1">//  - phB_h, phB_l - B phase pwm pin high/low pair</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1">//  - phB_h, phC_l - C phase pwm pin high/low pair</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1">//  - enable pin    - (optional input)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="n">BLDCDriver6PWM</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCDriver6PWM</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Microcontroller Considerations</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:3"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Arduino Uno</label><label for="__tabbed_6_2">STM32</label><label for="__tabbed_6_3">ESP32</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Arduino UNO and all the atmega328 based boards have only 6 PWM pins and in order to use the <code>BLDCDrievr6PWM</code> we need to use all of them. Those are <code>3</code>,<code>5</code>,<code>6</code>,<code>9</code>,<code>10</code> and <code>11</code>. 
Furthermore in order for the algorithm to work well we need to use the PWM pins that belong to the same timer for each high/low side pair of each phase.
So Atmega328 pins belonging to the timers are:</p>
<table>
<thead>
<tr>
<th><code>TIM0</code></th>
<th><code>TIM1</code></th>
<th><code>TIM2</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>5</code>,<code>6</code></td>
<td><code>9</code>,<code>10</code></td>
<td><code>3</code>,<code>11</code></td>
</tr>
</tbody>
</table>
<p>Therefore it is important that <code>phA_h</code> and <code>phA_l</code> belong to one timer, <code>phB_h</code> and <code>phB_l</code> to second timer and <code>phC_h</code> and <code>phC_l</code> to the last timer. If we decide that phase <code>A</code> belongs to the timer <code>TIM0</code> we can set <code>phA_h</code> either to pin <code>5</code> or pin <code>6</code>. </p>
</div>
<div class="tabbed-block">
<p>Stm32 boards have two possible 6 PWM modes:</p>
<ul>
<li>Hardware 6 PWM mode</li>
<li>Software 6 PWM mode</li>
</ul>
<div class="grid cards" markdown>
<ul>
<li>
<p><strong>Hardware PWM</strong></p>
<hr />
<p>In hardware 6 PWM mode the user uses only one timer, usually Timer 1 for all the 6 PWM channels. Stm32 boards usually have at least one timer which has automatic complementary channels which avoids the need for a complicated channel inverting configuration. <span class="simple">Simple<span class="foc">FOC</span>library</span> automatically enables this control mode if you provide the pins that support this interface to the constructor of the <code>BLDCDriver6PWM</code> class. For example, both STM32 Bluepill and STM32 Nucleo boards have this interface supported by pins:</p>
<table>
<thead>
<tr>
<th><code>T1C1</code></th>
<th><code>T1C2</code></th>
<th><code>T1C3</code></th>
<th><code>T1C1N</code></th>
<th><code>T1C2N</code></th>
<th><code>T1C3N</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PA8</code></td>
<td><code>PA9</code></td>
<td><code>PA10</code></td>
<td><code>PB13</code></td>
<td><code>PB14</code></td>
<td><code>PB15</code></td>
</tr>
</tbody>
</table>
<p>Where <code>T1Cx</code> are the Timer 1 channels and <code>T1CxN</code> are their complementary channels (inverted channels). Each pair of <code>T1Cx</code> and <code>T1CxN</code> is used for one pair of the high/low PWM pins. The library will configure the necessary timers and registers if you provide these pins to the constrictor of the <code>BLDCDriver6PWM</code> class. For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">//  BLDCDriver6PWM( int phA_h, int phA_l, int phB_h, int phB_l, int phC_h, int phC_l, int en)</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">BLDCDriver6PWM</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCDriver6PWM</span><span class="p">(</span><span class="n">PA8</span><span class="p">,</span><span class="w"> </span><span class="n">PB13</span><span class="p">,</span><span class="w"> </span><span class="n">PA9</span><span class="p">,</span><span class="w"> </span><span class="n">PB14</span><span class="p">,</span><span class="w"> </span><span class="n">PA10</span><span class="p">,</span><span class="w"> </span><span class="n">PB15</span><span class="p">);</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Software PWM</strong></p>
<hr />
<p>If it is not possible to use the hardware 6 PWM mode with your board  <span class="simple">Simple<span class="foc">FOC</span>library</span> enables you to use any two channels of any of the timers as your high/low side PWM pair. Basically, the library will automatically configure the complementary channels on the provided low side pins. The only requirement for this code to work properly is exatcly the same as for the Arudino UNO, each phase high/low PWM pair needs to belong to the same timer. 
For example, if we take STM32 Nucleo F401RE board we can take for example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">//  BLDCDriver6PWM( int phA_h, int phA_l, int phB_h, int phB_l, int phC_h, int phC_l, int en)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">BLDCDriver6PWM</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCDriver6PWM</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
</code></pre></div>
Where</p>
<table>
<thead>
<tr>
<th><code>T1C1</code></th>
<th><code>T1C3</code></th>
<th><code>T2C3</code></th>
<th><code>T2C2</code></th>
<th><code>T3C1</code></th>
<th><code>T3C2</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>7</code></td>
<td><code>2</code></td>
<td><code>6</code></td>
<td><code>3</code></td>
<td><code>5</code></td>
<td><code>4</code></td>
</tr>
</tbody>
</table>
<p>On Bluepill we could use:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">//  BLDCDriver6PWM( int phA_h, int phA_l, int phB_h, int phB_l, int phC_h, int phC_l, int en)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">BLDCDriver6PWM</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCDriver6PWM</span><span class="p">(</span><span class="n">PA8</span><span class="p">,</span><span class="w"> </span><span class="n">PA9</span><span class="p">,</span><span class="w"> </span><span class="n">PB6</span><span class="p">,</span><span class="w"> </span><span class="n">PB7</span><span class="p">,</span><span class="w"> </span><span class="n">PB8</span><span class="p">,</span><span class="w"> </span><span class="n">PB9</span><span class="p">);</span>
</code></pre></div>
Where</p>
<table>
<thead>
<tr>
<th><code>T1C1</code></th>
<th><code>T1C2</code></th>
<th><code>T4C1</code></th>
<th><code>T4C2</code></th>
<th><code>T4C3</code></th>
<th><code>T4C4</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PA8</code></td>
<td><code>PA9</code></td>
<td><code>PB6</code></td>
<td><code>PB7</code></td>
<td><code>PB8</code></td>
<td><code>PB9</code></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p>ESP32 boards support <code>MCPWM</code> interface that is intended for this kind of applications. Each ESP32 board has two of the <code>MCPWM</code> channels and can support two 6 PWM drivers. There is no pin specific requirements for the ESP32, each pin can be used in PWM mode. But please make sure not to use the pins that have predefined states on boot because this could result malfunction. You can find this information online easily, here is a <a href="https://www.youtube.com/watch?v=c0tMGlJVmkw">YouTube video</a> with more details. </p>
</div>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details about the <code>BLDCDriver6PWM</code> class, check out the <a href="https://docs.simplefoc.com/bldcdriver6pwm">online documentation</a>.</p>
</div>
</dd>
</dl>
<!-- 
The PWM carrier frequency used to control the motor driver can greatly affect its efficiency.

* Low frequency - poor current shape, which increased heating and harmonics loss in the motor
* High frequency - increased transistor switching loss -->

<h3 id="bldc-motor">BLDC Motor<a class="headerlink" href="#bldc-motor" title="Permanent link"></a></h3>
<p>All BLDC motors are handled with the <a href="https://docs.simplefoc.com/bldcmotor"><code>BLDCMotor</code> class</a>.</p>
<dl>
<dt><code>BLDCMotor</code></dt>
<dd>
<p>This class implements the BLDC FOC algorithm, motion control loops, and monitoring.</p>
<p>To instantiate the BLDC motor we need to create an instance of the <code>BLDCMotor</code> class and provide it the number of <code>pole pairs</code> of the motor.
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">//  BLDCMotor(int pp, (optional R, KV))</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1">//  - pp  - pole pair number</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="c1">//  - R   - phase resistance value - optional</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1">//  - KV  - motor KV rating [rpm/V] - optional</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="n">BLDCMotor</span><span class="w"> </span><span class="n">motor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCMotor</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mf">10.5</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">);</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Motor Considerations</p>
<p>While, the datasheet for our <a href="https://www.sparkfun.com/products/20441">gimbal motor</a>, indicates that there are <strong>8 pole pairs</strong>, we have found that the motor operates more smoothly if the <code>BLDCMotor</code> class is instantiated with <strong>7 pole pairs</strong> instead.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">BLDCMotor</span> <span class="n">motor</span> <span class="o">=</span> <span class="n">BLDCMotor</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more details about the <code>BLDCMotor</code> class, check out the <a href="https://docs.simplefoc.com/bldcmotor">online documentation</a>.</p>
</div>
</dd>
</dl>
<h3 id="position-sensor">Position Sensor<a class="headerlink" href="#position-sensor" title="Permanent link"></a></h3>
<p>In order to incorporate the TMAG5273 hall-effect sensor into the FOC algorithm, users will need to utilize the <a href="https://docs.simplefoc.com/generic_sensor"><code>GenericSensor</code> class</a>.</p>
<dl>
<dt><code>GenericSensor</code></dt>
<dd>
<p>This class allows users to link a custom position sensor <em>(not already implemented in the SimpleFOC library)</em> by incorporating a few functions into their sketch.</p>
<ol>
<li>
<p>Implement two functions; one to initialize the TMAG5273 and another to read and return the sensor's current position.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">initMySensorCallback</span><span class="p">(){</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="c1">// do the init</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kt">float</span><span class="w"> </span><span class="nf">readMySensorCallback</span><span class="p">(){</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w"> </span><span class="c1">// read my sensor</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w"> </span><span class="c1">// return the angle value in radians in between 0 and 2PI</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">...;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Instantiate the <code>GenericSensor</code> class and initialize the class by providing it pointers to the two functions.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">// GenericSensor class constructor</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="c1">//  - readCallback pointer to the function reading the sensor angle</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1">//  - initCallback pointer to the function initialising the sensor (optional)</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="n">GenericSensor</span><span class="w"> </span><span class="n">sensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenericSensor</span><span class="p">(</span><span class="n">readMySensorCallback</span><span class="p">,</span><span class="w"> </span><span class="n">initMySensorCallback</span><span class="p">);</span>
</code></pre></div>
</li>
<li>
<p>There are two ways to use sensors implemented within the SimpleFOC library:</p>
<ul>
<li>As standalone position sensor<ul>
<li>In this configuration users would simply read the sensor's position, independently from incorporating the readings into the FOC algorithm.</li>
</ul>
</li>
<li>
<p>Incorporate it as the motor position sensor for FOC algorithm</p>
<ol>
<li>
<p>Initialize the sensor in the <code>setup()</code> loop:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="c1">// monitoring port</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">  </span><span class="c1">// initialize sensor hardware</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">  </span><span class="n">sensor</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;My sensor ready&quot;</span><span class="p">);</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">  </span><span class="n">_delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Link the sensor in the <code>setup()</code> loop:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">   </span><span class="p">....</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="c1">// initialize sensor hardware</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="n">sensor</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">  </span><span class="c1">// link to the motor</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">  </span><span class="n">motor</span><span class="p">.</span><span class="n">linkSensor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sensor</span><span class="p">);</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">  </span><span class="p">...</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">  </span><span class="n">motor</span><span class="p">.</span><span class="n">initFOC</span><span class="p">();</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">  </span><span class="p">...</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="p">}</span>
</code></pre></div>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</dd>
</dl>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more instructions on incorporating the <code>GenericSensor</code> class, please refer to the <a href="https://docs.simplefoc.com/generic_sensor">SimpleFOC documentation</a>.</p>
</div>
<h3 id="in-line-current-sensing">In-line Current Sensing<a class="headerlink" href="#in-line-current-sensing" title="Permanent link"></a></h3>
<p>In order to incorporate the current sensing into the FOC algorithm, users will need to utilize the <a href="https://docs.simplefoc.com/inline_current_sense"><code>InlineCurrentSense</code> class</a>.</p>
<dl>
<dt><code>InlineCurrentSense</code></dt>
<dd>
<p>This class allows users to link a custom position sensor <em>(not already implemented in the SimpleFOC library)</em> by incorporating a few functions into their sketch.</p>
<ol>
<li>
<p>Instantiate the <code>InlineCurrentSense</code> class and initialize the class by providing the hardware configuration.</p>
<p>To instantiate the inline current sensor using the <span class="simple">Simple<span class="foc">FOC</span>library</span> just create an instance of the class <code>InlineCurrentSense</code>. 
```cpp
// InlineCurrentSensor constructor
//  - shunt_resistor  - shunt resistor value
//  - gain  - current-sense op-amp gain
//  - phA   - A phase adc pin
//  - phB   - B phase adc pin
//  - phC   - C phase adc pin (optional)
InlineCurrentSense current_sense  = InlineCurrentSense(0.01, 20, A0, A1, A2);</p>
</li>
<li>
<p>Incorporate the current sensor into the FOC algorithm:</p>
<ol>
<li>
<p>Initialize the sensor in the <code>setup()</code> loop:</p>
<p>Once the current sense has been created it can be initialised. This <code>init()</code> function configures the ADC hardware for reading and finds the zero offsets of the ADC for each channel. 
```cpp
// init current sense
current_sense.init();</p>
</li>
<li>
<p>Link the sensor to the motor driver in the <code>setup()</code> loop:</p>
<p>To use the <code>InlineCurrentSense</code> with the FOC algorithm, first thing you'll need to do is to associate (link) your current sense with the <code>BLDCDriver</code>:
```cpp
// link current sense and driver
current_sense.linkDriver(&amp;driver);</p>
</li>
<li>
<p>Link the sensor to the motor in the <code>setup()</code> loop:</p>
<p>Once the driver is linked to the current sense, last step is to link the current sense with the <code>BLDCMotor</code> you wish to use it with:
```cpp
// link motor and current sense
motor.linkCurrentSense(&amp;current_sense);</p>
</li>
</ol>
<p>It is very important that the the current sensing <code>init</code> function is called after the <code>BLDCMotor</code> and <code>BLDCDriver</code> init functions are called. Which will make sure that the driver is enabled when current sense calibration is taking place. Also, it is important that the current sense <code>init</code> function is called before starting the foc algorithm with the <code>initFOC</code> function.</p>
<p>So the suggested code structure would be:</p>
<p>```cpp
void loop(){
  .... 
  // driver init
  driver.init();
  // link the driver to the current sense
  current_sense.linkDriver(&amp;driver);
  ....
  // motor init
  motor.init();
  .... 
  // init current sense
  current_sense.init();
  // link the current sense to the motor
  motor.linkCurrentSense(&amp;current_sense);
  ...
  // start the FOC
  motor.initFOC();
}</p>
</li>
</ol>
</dd>
</dl>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For instructions on incorporating the <code>InlineCurrentSense</code> class, please refer to the <a href="https://docs.simplefoc.com/inline_current_sense">SimpleFOC documentation</a>.</p>
</div>
<!-- ### Motion Control

Unless a feedback loop is incorporated when driving the motor *(i.e. with [position sensors](https://docs.simplefoc.com/sensors) or [current sensing](https://docs.simplefoc.com/current_sense))*, users should implement the SimpleFOC library using the [open-loop control](https://docs.simplefoc.com/open_loop_motion_control).

Open-Loop Motion Control Types:

* [Velocity](https://docs.simplefoc.com/velocity_openloop)
* [Position](https://docs.simplefoc.com/angle_openloop) -->

<!-- #### Sensorless FOC
Current measurement

#### Closed-Loop
With position sensors

Control Types (available in library):
* Torque
* Velocity
* Angle

#### Low-side current sensing

While the SimpleFOC Arduino library offers the option to incorporate low-side current sensors into the feedback loop, 


As ADC conversion has to be synchronised with the PWM generated on ALL the phases, it is important that all the PWM generated for all the phases have aligned PWM. Since the microcontrollers usually have more than one timer for PWM generation on its pins, different architectures of microcontrollers have different degrees of alinement in between the PWM generated from different timers.


<blockquote class="info">
<p class="heading">RULE OF THUMB: PWM timer pins</p>
In order to maximise your chances for the low-side current sensing to work well we suggest to make sure that the PWM pins chosen for your driver all belong to the same timer.

Finding out which pins belong to different timers might require some time to be spent in the MCU datasheet 😄
You can also always ask the community for help - <a href="https://community.simplefoc.com/">community link</a>!
</blockquote>



utilizing the [open loop example](https://github.com/simplefoc/Arduino-FOC/blob/master/examples/motion_control/open_loop_motor_control/open_loop_velocity_example/open_loop_velocity_example.ino) combined with the [6 channel PWM method](https://docs.simplefoc.com/bldcdriver6pwm) and *every* PWM pin on the Arduino Uno gets this board working. Note the [pairs of PWM pins](https://docs.simplefoc.com/bldcdriver6pwm) that must be used. -->

<h2 id="example-bldc">Example - BLDC<a class="headerlink" href="#example-bldc" title="Permanent link"></a></h2>
<p>In this example, users will be utilizing the TMC6300 motor driver to spin the motor.</p>
<h2 id="example-code">Example Code<a class="headerlink" href="#example-code" title="Permanent link"></a></h2>
<p>After installing and setting up the Arduino IDE and the Simple FOC Arduino library, users will need to upload the following example code using the <strong>SparkFun ESP32 Thing Plus C</strong> board definition. This code can be copied or downloaded below:</p>
<p><center>
<a class="md-button md-button--primary" href="../assets/arduino_examples/BLDC/BLDC.ino"><span class="twemoji heart"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z"/><path d="M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z"/></svg></span> Download <code>BLDC.ino</code> Example Code</a>
</center></p>
<div class="admonition code">
<p class="admonition-title">Example Code</p>
<div class="highlight"><span class="filename">BLDC.ino</span><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="w">    </span><span class="c1">// Open loop motor control example</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SimpleFOC.h&gt;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="c1">// BLDC motor &amp; driver instance</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="c1">// BLDCMotor motor = BLDCMotor(pole pair number);</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">    </span><span class="n">BLDCMotor</span><span class="w"> </span><span class="n">motor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCMotor</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">    </span><span class="c1">// BLDCDriver3PWM driver = BLDCDriver3PWM(pwmA, pwmB, pwmC, Enable(optional));</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">    </span><span class="n">BLDCDriver6PWM</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCDriver6PWM</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">);</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">    </span><span class="c1">// Stepper motor &amp; driver instance</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="c1">//StepperMotor motor = StepperMotor(50);</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">    </span><span class="c1">//StepperDriver4PWM driver = StepperDriver4PWM(9, 5, 10, 6,  8);</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">    </span><span class="c1">//target variable</span>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">    </span><span class="c1">// // instantiate the commander</span>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="w">    </span><span class="n">Commander</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Commander</span><span class="p">(</span><span class="n">Serial</span><span class="p">);</span>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="w">    </span><span class="c1">// void doTarget(char* cmd) { command.scalar(&amp;target_velocity, cmd); }</span>
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="w">    </span><span class="c1">// void doLimit(char* cmd) { command.scalar(&amp;motor.voltage_limit, cmd); }</span>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="w">      </span><span class="c1">// driver config</span>
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="w">      </span><span class="c1">// power supply voltage [V]</span>
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">voltage_power_supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a><span class="w">      </span><span class="c1">// limit the maximal dc voltage the driver can set</span>
<a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a><span class="w">      </span><span class="c1">// as a protection measure for the low-resistance motors</span>
<a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a><span class="w">      </span><span class="c1">// this value is fixed on startup</span>
<a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">voltage_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a><span class="w">      </span><span class="c1">// pwm frequency to be used [Hz]</span>
<a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a><span class="w">      </span><span class="c1">// for atmega328 fixed to 32kHz</span>
<a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a><span class="w">      </span><span class="c1">// esp32/stm32/teensy configurable</span>
<a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">pwm_frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32000</span><span class="p">;</span>
<a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a>
<a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a>
<a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a><span class="w">      </span><span class="c1">// link the motor and the driver</span>
<a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">linkDriver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">driver</span><span class="p">);</span>
<a id="__codelineno-13-42" name="__codelineno-13-42" href="#__codelineno-13-42"></a>
<a id="__codelineno-13-43" name="__codelineno-13-43" href="#__codelineno-13-43"></a><span class="w">      </span><span class="c1">// limiting motor movements</span>
<a id="__codelineno-13-44" name="__codelineno-13-44" href="#__codelineno-13-44"></a><span class="w">      </span><span class="c1">// limit the voltage to be set to the motor</span>
<a id="__codelineno-13-45" name="__codelineno-13-45" href="#__codelineno-13-45"></a><span class="w">      </span><span class="c1">// start very low for high resistance motors</span>
<a id="__codelineno-13-46" name="__codelineno-13-46" href="#__codelineno-13-46"></a><span class="w">      </span><span class="c1">// current = voltage / resistance, so try to be well under 1Amp</span>
<a id="__codelineno-13-47" name="__codelineno-13-47" href="#__codelineno-13-47"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">voltage_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">   </span><span class="c1">// [V]</span>
<a id="__codelineno-13-48" name="__codelineno-13-48" href="#__codelineno-13-48"></a>
<a id="__codelineno-13-49" name="__codelineno-13-49" href="#__codelineno-13-49"></a><span class="w">      </span><span class="c1">// open loop control config</span>
<a id="__codelineno-13-50" name="__codelineno-13-50" href="#__codelineno-13-50"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MotionControlType</span><span class="o">::</span><span class="n">velocity_openloop</span><span class="p">;</span>
<a id="__codelineno-13-51" name="__codelineno-13-51" href="#__codelineno-13-51"></a>
<a id="__codelineno-13-52" name="__codelineno-13-52" href="#__codelineno-13-52"></a><span class="w">      </span><span class="c1">// init motor hardware</span>
<a id="__codelineno-13-53" name="__codelineno-13-53" href="#__codelineno-13-53"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-13-54" name="__codelineno-13-54" href="#__codelineno-13-54"></a>
<a id="__codelineno-13-55" name="__codelineno-13-55" href="#__codelineno-13-55"></a><span class="w">      </span><span class="c1">// add target command T</span>
<a id="__codelineno-13-56" name="__codelineno-13-56" href="#__codelineno-13-56"></a><span class="w">      </span><span class="c1">// command.add(&#39;T&#39;, doTarget, &quot;target velocity&quot;);</span>
<a id="__codelineno-13-57" name="__codelineno-13-57" href="#__codelineno-13-57"></a><span class="w">      </span><span class="c1">// command.add(&#39;L&#39;, doLimit, &quot;voltage limit&quot;);</span>
<a id="__codelineno-13-58" name="__codelineno-13-58" href="#__codelineno-13-58"></a>
<a id="__codelineno-13-59" name="__codelineno-13-59" href="#__codelineno-13-59"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<a id="__codelineno-13-60" name="__codelineno-13-60" href="#__codelineno-13-60"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Motor ready!&quot;</span><span class="p">);</span>
<a id="__codelineno-13-61" name="__codelineno-13-61" href="#__codelineno-13-61"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Set target velocity [rad/s]&quot;</span><span class="p">);</span>
<a id="__codelineno-13-62" name="__codelineno-13-62" href="#__codelineno-13-62"></a><span class="w">      </span><span class="n">_delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<a id="__codelineno-13-63" name="__codelineno-13-63" href="#__codelineno-13-63"></a>
<a id="__codelineno-13-64" name="__codelineno-13-64" href="#__codelineno-13-64"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-13-65" name="__codelineno-13-65" href="#__codelineno-13-65"></a>
<a id="__codelineno-13-66" name="__codelineno-13-66" href="#__codelineno-13-66"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-67" name="__codelineno-13-67" href="#__codelineno-13-67"></a>
<a id="__codelineno-13-68" name="__codelineno-13-68" href="#__codelineno-13-68"></a><span class="w">      </span><span class="c1">// open loop velocity movement</span>
<a id="__codelineno-13-69" name="__codelineno-13-69" href="#__codelineno-13-69"></a><span class="w">      </span><span class="c1">// using motor.voltage_limit and motor.velocity_limit</span>
<a id="__codelineno-13-70" name="__codelineno-13-70" href="#__codelineno-13-70"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">target_velocity</span><span class="p">);</span>
<a id="__codelineno-13-71" name="__codelineno-13-71" href="#__codelineno-13-71"></a>
<a id="__codelineno-13-72" name="__codelineno-13-72" href="#__codelineno-13-72"></a><span class="w">      </span><span class="c1">// user communication</span>
<a id="__codelineno-13-73" name="__codelineno-13-73" href="#__codelineno-13-73"></a><span class="w">      </span><span class="n">command</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
<a id="__codelineno-13-74" name="__codelineno-13-74" href="#__codelineno-13-74"></a>
<a id="__codelineno-13-75" name="__codelineno-13-75" href="#__codelineno-13-75"></a>
<a id="__codelineno-13-76" name="__codelineno-13-76" href="#__codelineno-13-76"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div>
</div>
<h3 id="running-the-motor">Running the Motor<a class="headerlink" href="#running-the-motor" title="Permanent link"></a></h3>
<p>By default, the motor should spin automatically. However, if users wish to control the speed of the motor, they can uncomment lines <strong>21-22</strong> and <strong>56-57</strong> of code and reprogram the board.</p>
<details class="code">
<summary>Code Changes Highlighted</summary>
<p>Uncomment the following lines of code (<strong>21-22</strong> and <strong>56-57</strong>):</p>
<div class="highlight"><span class="filename">BLDC.ino</span><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="w">    </span><span class="c1">// Open loop motor control example</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SimpleFOC.h&gt;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="c1">// BLDC motor &amp; driver instance</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="c1">// BLDCMotor motor = BLDCMotor(pole pair number);</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="n">BLDCMotor</span><span class="w"> </span><span class="n">motor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCMotor</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="c1">// BLDCDriver3PWM driver = BLDCDriver3PWM(pwmA, pwmB, pwmC, Enable(optional));</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">    </span><span class="n">BLDCDriver6PWM</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCDriver6PWM</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">);</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="c1">// Stepper motor &amp; driver instance</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">    </span><span class="c1">//StepperMotor motor = StepperMotor(50);</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">    </span><span class="c1">//StepperDriver4PWM driver = StepperDriver4PWM(9, 5, 10, 6,  8);</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">    </span><span class="c1">//target variable</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="w">    </span><span class="c1">// // instantiate the commander</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="w">    </span><span class="n">Commander</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Commander</span><span class="p">(</span><span class="n">Serial</span><span class="p">);</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="hll"><span class="w">    </span><span class="c1">// void doTarget(char* cmd) { command.scalar(&amp;target_velocity, cmd); }</span>
</span><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="hll"><span class="w">    </span><span class="c1">// void doLimit(char* cmd) { command.scalar(&amp;motor.voltage_limit, cmd); }</span>
</span><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="w">      </span><span class="c1">// driver config</span>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">      </span><span class="c1">// power supply voltage [V]</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">voltage_power_supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="w">      </span><span class="c1">// limit the maximal dc voltage the driver can set</span>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="w">      </span><span class="c1">// as a protection measure for the low-resistance motors</span>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="w">      </span><span class="c1">// this value is fixed on startup</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">voltage_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="w">      </span><span class="c1">// pwm frequency to be used [Hz]</span>
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="w">      </span><span class="c1">// for atmega328 fixed to 32kHz</span>
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="w">      </span><span class="c1">// esp32/stm32/teensy configurable</span>
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">pwm_frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32000</span><span class="p">;</span>
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a>
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a>
<a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="w">      </span><span class="c1">// link the motor and the driver</span>
<a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">linkDriver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">driver</span><span class="p">);</span>
<a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a>
<a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a><span class="w">      </span><span class="c1">// limiting motor movements</span>
<a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="w">      </span><span class="c1">// limit the voltage to be set to the motor</span>
<a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a><span class="w">      </span><span class="c1">// start very low for high resistance motors</span>
<a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="w">      </span><span class="c1">// current = voltage / resistance, so try to be well under 1Amp</span>
<a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">voltage_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">   </span><span class="c1">// [V]</span>
<a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a>
<a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a><span class="w">      </span><span class="c1">// open loop control config</span>
<a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MotionControlType</span><span class="o">::</span><span class="n">velocity_openloop</span><span class="p">;</span>
<a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a>
<a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a><span class="w">      </span><span class="c1">// init motor hardware</span>
<a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a>
<a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a><span class="w">      </span><span class="c1">// add target command T</span>
<a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a><span class="hll"><span class="w">      </span><span class="c1">// command.add(&#39;T&#39;, doTarget, &quot;target velocity&quot;);</span>
</span><a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a><span class="hll"><span class="w">      </span><span class="c1">// command.add(&#39;L&#39;, doLimit, &quot;voltage limit&quot;);</span>
</span><a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a>
<a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Motor ready!&quot;</span><span class="p">);</span>
<a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Set target velocity [rad/s]&quot;</span><span class="p">);</span>
<a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a><span class="w">      </span><span class="n">_delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a>
<a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a>
<a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-67" name="__codelineno-14-67" href="#__codelineno-14-67"></a>
<a id="__codelineno-14-68" name="__codelineno-14-68" href="#__codelineno-14-68"></a><span class="w">      </span><span class="c1">// open loop velocity movement</span>
<a id="__codelineno-14-69" name="__codelineno-14-69" href="#__codelineno-14-69"></a><span class="w">      </span><span class="c1">// using motor.voltage_limit and motor.velocity_limit</span>
<a id="__codelineno-14-70" name="__codelineno-14-70" href="#__codelineno-14-70"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">target_velocity</span><span class="p">);</span>
<a id="__codelineno-14-71" name="__codelineno-14-71" href="#__codelineno-14-71"></a>
<a id="__codelineno-14-72" name="__codelineno-14-72" href="#__codelineno-14-72"></a><span class="w">      </span><span class="c1">// user communication</span>
<a id="__codelineno-14-73" name="__codelineno-14-73" href="#__codelineno-14-73"></a><span class="w">      </span><span class="n">command</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
<a id="__codelineno-14-74" name="__codelineno-14-74" href="#__codelineno-14-74"></a>
<a id="__codelineno-14-75" name="__codelineno-14-75" href="#__codelineno-14-75"></a>
<a id="__codelineno-14-76" name="__codelineno-14-76" href="#__codelineno-14-76"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div>
</details>
<p>In order to drive the motor, users will need to access the <a href="https://learn.sparkfun.com/tutorials/8">serial monitor</a> and provide the <a href="https://docs.simplefoc.com/commands_source">commands</a> necessary to drive the motor. A full list of the available commands can be found in the <a href="https://docs.simplefoc.com/commands_source">Simple FOC Arduino library documentation</a>. However, only the <code>T</code> and <code>L</code> commands are enabled in the example code.</p>
<ul>
<li>Sending a <code>T</code> command will set the target motor velocity in rads/s<ul>
<li>Example - Entering <code>T6</code> into the serial monitor, will set the target motor velocity to 6 radians/s.</li>
</ul>
</li>
<li>Sending a <code>L</code> command will set the voltage limit of the motor driver and in turn, the current limit <em>(voltage_limit / motor_resistance)</em><ul>
<li>Example - Entering <code>L5</code> into the serial monitor, will set the voltage limit to 5V and the current limit to .5A <em>(5V/10&ohm;)</em>.</li>
</ul>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Baud Rate</p>
<p>The serial monitor baud rate should be configured to <code>115200bps</code>.</p>
</div>
<h2 id="example-foc-algorithm">Example - FOC Algorithm<a class="headerlink" href="#example-foc-algorithm" title="Permanent link"></a></h2>
<h2 id="example-factory-reset">Example - Factory Reset<a class="headerlink" href="#example-factory-reset" title="Permanent link"></a></h2>
<p>This example, allows users to reprogram their board with the same sketch that it comes pre-programmed with from SparkFun.</p>
<h2 id="example-code_1">Example Code<a class="headerlink" href="#example-code_1" title="Permanent link"></a></h2>
<p>After installing and setting up the Arduino IDE and the Simple FOC Arduino library, users will need to upload the following example code using the <strong>SparkFun ESP32 Thing Plus C</strong> board definition. This code can be copied or downloaded below:</p>
<p><center>
<a class="md-button md-button--primary" href="../assets/arduino_examples/IoT_MotorDriver/IoT_MotorDriver.ino"><span class="twemoji heart"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z"/><path d="M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z"/></svg></span> Download <code>IoT_MotorDriver.ino</code> Example Code</a>
</center></p>
<div class="admonition code">
<p class="admonition-title">Example Code</p>
<div class="highlight"><span class="filename">IoT_MotorDriver.ino</span><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="w">    </span><span class="cm">/******************************************************************************</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="cm">        IoT Motor Driver Example</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="cm">        Written By:</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="cm">            Madison Chodikov</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="cm">            Eric Orosel</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="cm">        Company: SparkFun Electronics   </span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="cm">        Date: September 1 2023</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="cm">        This sketch is a stripped down version of the firmware that is preprogrammed</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="cm">        on the IoT Motor Driver. It is based on the open loop, velocity motor control</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="cm">        example from the SimpleFOC Arduino library.</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="cm">        This sketch will spin the motor based on the button inputs:</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="cm">            - Button 13: Starts/Stops the motor rotation</span>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="cm">            - Button 14: When spinning, switches the direction of rotation</span>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="cm">    ===============================================================================</span>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="cm">        Products:</span>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a><span class="cm">            IoT Brushless Motor Driver: https://www.sparkfun.com/products/22132</span>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="cm">        Repository:</span>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="cm">            https://github.com/sparkfun/SparkFun_IoT_Brushless_Motor_Driver</span>
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="cm">    ===============================================================================</span>
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="cm">        SparkFun code, firmware, and software is released under the MIT </span>
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="cm">        License (http://opensource.org/licenses/MIT).</span>
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="cm">        Distributed as-is; no warranty is given.</span>
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a><span class="cm">    ******************************************************************************/</span>
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a>
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span>
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SimpleFOC.h&gt;</span><span class="c1"> //http://librarymanager/All#Simple%20FOC</span>
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a>
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a><span class="w">    </span><span class="c1">//GPIO</span>
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a><span class="w">    </span><span class="cp">#define auxBtn2   13</span>
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a><span class="w">    </span><span class="cp">#define auxBtn1   14  </span>
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a>
<a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a><span class="w">    </span><span class="c1">//driver</span>
<a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a><span class="w">    </span><span class="cp">#define uh16      16</span>
<a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a><span class="w">    </span><span class="cp">#define ul17      17</span>
<a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a><span class="w">    </span><span class="cp">#define vh18      18</span>
<a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a><span class="w">    </span><span class="cp">#define wh19      19</span>
<a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a><span class="w">    </span><span class="cp">#define vl23      23</span>
<a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a><span class="w">    </span><span class="cp">#define wl33      33</span>
<a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a><span class="w">    </span><span class="cp">#define curSense  32</span>
<a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a>
<a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a>
<a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a><span class="w">    </span><span class="c1">//motor driver</span>
<a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a><span class="w">    </span><span class="n">BLDCMotor</span><span class="w"> </span><span class="n">motor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCMotor</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<a id="__codelineno-15-53" name="__codelineno-15-53" href="#__codelineno-15-53"></a><span class="w">    </span><span class="n">BLDCDriver6PWM</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCDriver6PWM</span><span class="p">(</span><span class="n">uh16</span><span class="p">,</span><span class="w"> </span><span class="n">ul17</span><span class="p">,</span><span class="w"> </span><span class="n">vh18</span><span class="p">,</span><span class="w"> </span><span class="n">vl23</span><span class="p">,</span><span class="w"> </span><span class="n">wh19</span><span class="p">,</span><span class="w"> </span><span class="n">wl33</span><span class="p">,</span><span class="w">  </span><span class="n">curSense</span><span class="p">);</span>
<a id="__codelineno-15-54" name="__codelineno-15-54" href="#__codelineno-15-54"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<a id="__codelineno-15-55" name="__codelineno-15-55" href="#__codelineno-15-55"></a><span class="w">    </span><span class="n">Commander</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Commander</span><span class="p">(</span><span class="n">Serial</span><span class="p">);</span>
<a id="__codelineno-15-56" name="__codelineno-15-56" href="#__codelineno-15-56"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">doTarget</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cmd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">scalar</span><span class="p">(</span><span class="o">&amp;</span><span class="n">target_velocity</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-15-57" name="__codelineno-15-57" href="#__codelineno-15-57"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">doLimit</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cmd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">scalar</span><span class="p">(</span><span class="o">&amp;</span><span class="n">motor</span><span class="p">.</span><span class="n">voltage_limit</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-15-58" name="__codelineno-15-58" href="#__codelineno-15-58"></a>
<a id="__codelineno-15-59" name="__codelineno-15-59" href="#__codelineno-15-59"></a><span class="w">    </span><span class="c1">//////////////////////motor demo stuff///////////////////////////</span>
<a id="__codelineno-15-60" name="__codelineno-15-60" href="#__codelineno-15-60"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">Button</span><span class="p">{</span>
<a id="__codelineno-15-61" name="__codelineno-15-61" href="#__codelineno-15-61"></a><span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">PIN</span><span class="p">;</span>
<a id="__codelineno-15-62" name="__codelineno-15-62" href="#__codelineno-15-62"></a><span class="w">      </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">numberKeyPresses</span><span class="p">;</span>
<a id="__codelineno-15-63" name="__codelineno-15-63" href="#__codelineno-15-63"></a><span class="w">      </span><span class="kt">bool</span><span class="w"> </span><span class="n">pressed</span><span class="p">;</span>
<a id="__codelineno-15-64" name="__codelineno-15-64" href="#__codelineno-15-64"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-15-65" name="__codelineno-15-65" href="#__codelineno-15-65"></a><span class="w">    </span><span class="n">Button</span><span class="w"> </span><span class="n">aux1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">auxBtn1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">};</span>
<a id="__codelineno-15-66" name="__codelineno-15-66" href="#__codelineno-15-66"></a><span class="w">    </span><span class="n">Button</span><span class="w"> </span><span class="n">aux2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">auxBtn2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">};</span>
<a id="__codelineno-15-67" name="__codelineno-15-67" href="#__codelineno-15-67"></a>
<a id="__codelineno-15-68" name="__codelineno-15-68" href="#__codelineno-15-68"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">IRAM_ATTR</span><span class="w"> </span><span class="nf">isr1</span><span class="p">(){</span>
<a id="__codelineno-15-69" name="__codelineno-15-69" href="#__codelineno-15-69"></a><span class="w">      </span><span class="n">aux1</span><span class="p">.</span><span class="n">pressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-15-70" name="__codelineno-15-70" href="#__codelineno-15-70"></a><span class="w">      </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target_velocity</span><span class="o">*</span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span>
<a id="__codelineno-15-71" name="__codelineno-15-71" href="#__codelineno-15-71"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Changing directions.. &quot;</span><span class="p">);</span>
<a id="__codelineno-15-72" name="__codelineno-15-72" href="#__codelineno-15-72"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-73" name="__codelineno-15-73" href="#__codelineno-15-73"></a>
<a id="__codelineno-15-74" name="__codelineno-15-74" href="#__codelineno-15-74"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">IRAM_ATTR</span><span class="w"> </span><span class="nf">isr2</span><span class="p">(){</span>
<a id="__codelineno-15-75" name="__codelineno-15-75" href="#__codelineno-15-75"></a><span class="w">      </span><span class="n">aux2</span><span class="p">.</span><span class="n">numberKeyPresses</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-15-76" name="__codelineno-15-76" href="#__codelineno-15-76"></a><span class="w">      </span><span class="n">aux2</span><span class="p">.</span><span class="n">pressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-15-77" name="__codelineno-15-77" href="#__codelineno-15-77"></a>
<a id="__codelineno-15-78" name="__codelineno-15-78" href="#__codelineno-15-78"></a><span class="w">      </span><span class="k">if</span><span class="p">((</span><span class="n">aux2</span><span class="p">.</span><span class="n">numberKeyPresses</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-15-79" name="__codelineno-15-79" href="#__codelineno-15-79"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-15-80" name="__codelineno-15-80" href="#__codelineno-15-80"></a><span class="w">        </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-15-81" name="__codelineno-15-81" href="#__codelineno-15-81"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Stopping motor.. &quot;</span><span class="p">);</span>
<a id="__codelineno-15-82" name="__codelineno-15-82" href="#__codelineno-15-82"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-15-83" name="__codelineno-15-83" href="#__codelineno-15-83"></a><span class="w">      </span><span class="k">else</span>
<a id="__codelineno-15-84" name="__codelineno-15-84" href="#__codelineno-15-84"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-15-85" name="__codelineno-15-85" href="#__codelineno-15-85"></a><span class="w">        </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-15-86" name="__codelineno-15-86" href="#__codelineno-15-86"></a><span class="w">        </span><span class="n">motor</span><span class="p">.</span><span class="n">enable</span><span class="p">();</span>
<a id="__codelineno-15-87" name="__codelineno-15-87" href="#__codelineno-15-87"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Starting motor.. &quot;</span><span class="p">);</span>
<a id="__codelineno-15-88" name="__codelineno-15-88" href="#__codelineno-15-88"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-15-89" name="__codelineno-15-89" href="#__codelineno-15-89"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-90" name="__codelineno-15-90" href="#__codelineno-15-90"></a>
<a id="__codelineno-15-91" name="__codelineno-15-91" href="#__codelineno-15-91"></a>
<a id="__codelineno-15-92" name="__codelineno-15-92" href="#__codelineno-15-92"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-93" name="__codelineno-15-93" href="#__codelineno-15-93"></a>
<a id="__codelineno-15-94" name="__codelineno-15-94" href="#__codelineno-15-94"></a><span class="w">      </span><span class="c1">//motor demo stuff</span>
<a id="__codelineno-15-95" name="__codelineno-15-95" href="#__codelineno-15-95"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">voltage_power_supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.3</span><span class="p">;</span>
<a id="__codelineno-15-96" name="__codelineno-15-96" href="#__codelineno-15-96"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">pwm_frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20000</span><span class="p">;</span>
<a id="__codelineno-15-97" name="__codelineno-15-97" href="#__codelineno-15-97"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">voltage_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<a id="__codelineno-15-98" name="__codelineno-15-98" href="#__codelineno-15-98"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-15-99" name="__codelineno-15-99" href="#__codelineno-15-99"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">linkDriver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">driver</span><span class="p">);</span>
<a id="__codelineno-15-100" name="__codelineno-15-100" href="#__codelineno-15-100"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">voltage_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<a id="__codelineno-15-101" name="__codelineno-15-101" href="#__codelineno-15-101"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MotionControlType</span><span class="o">::</span><span class="n">velocity_openloop</span><span class="p">;</span>
<a id="__codelineno-15-102" name="__codelineno-15-102" href="#__codelineno-15-102"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-15-103" name="__codelineno-15-103" href="#__codelineno-15-103"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">disable</span><span class="p">();</span>
<a id="__codelineno-15-104" name="__codelineno-15-104" href="#__codelineno-15-104"></a><span class="w">      </span><span class="n">pinMode</span><span class="p">(</span><span class="n">aux1</span><span class="p">.</span><span class="n">PIN</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// Sets pin 14 on the ESP32 as an interrupt</span>
<a id="__codelineno-15-105" name="__codelineno-15-105" href="#__codelineno-15-105"></a><span class="w">      </span><span class="n">attachInterrupt</span><span class="p">(</span><span class="n">aux1</span><span class="p">.</span><span class="n">PIN</span><span class="p">,</span><span class="w"> </span><span class="n">isr1</span><span class="p">,</span><span class="w"> </span><span class="n">FALLING</span><span class="p">);</span><span class="w"> </span><span class="c1">// Triggers when aux1 is pulled to GND (button pressed)</span>
<a id="__codelineno-15-106" name="__codelineno-15-106" href="#__codelineno-15-106"></a><span class="w">      </span><span class="n">pinMode</span><span class="p">(</span><span class="n">aux2</span><span class="p">.</span><span class="n">PIN</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// Sets pin 13 on the ESP32 as an interrupt</span>
<a id="__codelineno-15-107" name="__codelineno-15-107" href="#__codelineno-15-107"></a><span class="w">      </span><span class="n">attachInterrupt</span><span class="p">(</span><span class="n">aux2</span><span class="p">.</span><span class="n">PIN</span><span class="p">,</span><span class="w"> </span><span class="n">isr2</span><span class="p">,</span><span class="w"> </span><span class="n">FALLING</span><span class="p">);</span><span class="w"> </span><span class="c1">// Triggers when aux2 is pulled to GND (button pressed)</span>
<a id="__codelineno-15-108" name="__codelineno-15-108" href="#__codelineno-15-108"></a><span class="w">      </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-15-109" name="__codelineno-15-109" href="#__codelineno-15-109"></a>
<a id="__codelineno-15-110" name="__codelineno-15-110" href="#__codelineno-15-110"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<a id="__codelineno-15-111" name="__codelineno-15-111" href="#__codelineno-15-111"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-112" name="__codelineno-15-112" href="#__codelineno-15-112"></a>
<a id="__codelineno-15-113" name="__codelineno-15-113" href="#__codelineno-15-113"></a><span class="w">    </span><span class="c1">/////////////////////////////////////////////////////////////////////////</span>
<a id="__codelineno-15-114" name="__codelineno-15-114" href="#__codelineno-15-114"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-15-115" name="__codelineno-15-115" href="#__codelineno-15-115"></a>
<a id="__codelineno-15-116" name="__codelineno-15-116" href="#__codelineno-15-116"></a><span class="w">      </span><span class="c1">// Button Press ISR</span>
<a id="__codelineno-15-117" name="__codelineno-15-117" href="#__codelineno-15-117"></a><span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">aux1</span><span class="p">.</span><span class="n">pressed</span><span class="p">){</span><span class="w"> </span>
<a id="__codelineno-15-118" name="__codelineno-15-118" href="#__codelineno-15-118"></a><span class="w">        </span><span class="n">aux1</span><span class="p">.</span><span class="n">pressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-15-119" name="__codelineno-15-119" href="#__codelineno-15-119"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-15-120" name="__codelineno-15-120" href="#__codelineno-15-120"></a>
<a id="__codelineno-15-121" name="__codelineno-15-121" href="#__codelineno-15-121"></a><span class="w">      </span><span class="c1">// Turning motor on and off</span>
<a id="__codelineno-15-122" name="__codelineno-15-122" href="#__codelineno-15-122"></a><span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">aux2</span><span class="p">.</span><span class="n">pressed</span><span class="p">){</span><span class="w"> </span>
<a id="__codelineno-15-123" name="__codelineno-15-123" href="#__codelineno-15-123"></a><span class="w">        </span><span class="n">aux2</span><span class="p">.</span><span class="n">pressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-15-124" name="__codelineno-15-124" href="#__codelineno-15-124"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-15-125" name="__codelineno-15-125" href="#__codelineno-15-125"></a>
<a id="__codelineno-15-126" name="__codelineno-15-126" href="#__codelineno-15-126"></a><span class="w">      </span><span class="c1">// open loop velocity movement</span>
<a id="__codelineno-15-127" name="__codelineno-15-127" href="#__codelineno-15-127"></a><span class="w">      </span><span class="c1">// using motor.voltage_limit and motor.velocity_limit</span>
<a id="__codelineno-15-128" name="__codelineno-15-128" href="#__codelineno-15-128"></a><span class="w">      </span><span class="c1">// Basic motor movement</span>
<a id="__codelineno-15-129" name="__codelineno-15-129" href="#__codelineno-15-129"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">target_velocity</span><span class="p">);</span>
<a id="__codelineno-15-130" name="__codelineno-15-130" href="#__codelineno-15-130"></a>
<a id="__codelineno-15-131" name="__codelineno-15-131" href="#__codelineno-15-131"></a><span class="w">      </span><span class="c1">// user communication</span>
<a id="__codelineno-15-132" name="__codelineno-15-132" href="#__codelineno-15-132"></a><span class="w">      </span><span class="n">command</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
<a id="__codelineno-15-133" name="__codelineno-15-133" href="#__codelineno-15-133"></a>
<a id="__codelineno-15-134" name="__codelineno-15-134" href="#__codelineno-15-134"></a><span class="w">      </span><span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-15-135" name="__codelineno-15-135" href="#__codelineno-15-135"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div>
</div>
<h3 id="running-the-motor_1">Running the Motor<a class="headerlink" href="#running-the-motor_1" title="Permanent link"></a></h3>
<p>By default, the motor should be disabled and spin freely. Users can utilize the user buttons <span class="keys"><kbd>13</kbd></span> and <span class="keys"><kbd>14</kbd></span> to control the motor.</p>
<ul>
<li><span class="keys"><kbd>13</kbd></span> - Starts and stops the motor spin</li>
<li><span class="keys"><kbd>14</kbd></span> - Reverses the direction of the motor's rotation, when it is spinning</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Motor Overheating</p>
<p>When the motor is stopped, the motor driver is still enabled. Therefore, current is still running through the stator coils and holding the motor in place. After a few minutes, users may notice that the motor begins to heat up a bit.</p>
<p>If this becomes an issue, users can modify their code to disable the motor driver when the motor stops. This will prevent the motor from heating up, but the motor will spin freely as the motor driver is no longer engaged.</p>
<details class="code">
<summary>Modification</summary>
<p>Modify the sketch and insert <code>motor.disable();</code> between lines <code>80</code> - <code>81</code>.</p>
<div class="highlight"><span class="filename">DC.ino</span><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="w">    </span><span class="cm">/******************************************************************************</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="cm">        IoT Motor Driver Example</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="cm">        Written By:</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="cm">            Madison Chodikov</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="cm">            Eric Orosel</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="cm">        Company: SparkFun Electronics   </span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="cm">        Date: September 1 2023</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="cm">        This sketch is a stripped down version of the firmware that is preprogrammed</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="cm">        on the IoT Motor Driver. It is based on the open loop, velocity motor control</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="cm">        example from the SimpleFOC Arduino library.</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="cm">        This sketch will spin the motor based on the button inputs:</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="cm">            - Button 13: Starts/Stops the motor rotation</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="cm">            - Button 14: When spinning, switches the direction of rotation</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="cm">    ===============================================================================</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="cm">        Products:</span>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="cm">            IoT Brushless Motor Driver: https://www.sparkfun.com/products/22132</span>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="cm">        Repository:</span>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="cm">            https://github.com/sparkfun/SparkFun_IoT_Brushless_Motor_Driver</span>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="cm">    ===============================================================================</span>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a><span class="cm">        SparkFun code, firmware, and software is released under the MIT </span>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="cm">        License (http://opensource.org/licenses/MIT).</span>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a><span class="cm">        Distributed as-is; no warranty is given.</span>
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a><span class="cm">    ******************************************************************************/</span>
<a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a>
<a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span>
<a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SimpleFOC.h&gt;</span><span class="c1"> //http://librarymanager/All#Simple%20FOC</span>
<a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a>
<a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>
<a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a><span class="w">    </span><span class="c1">//GPIO</span>
<a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a><span class="w">    </span><span class="cp">#define auxBtn2   13</span>
<a id="__codelineno-16-38" name="__codelineno-16-38" href="#__codelineno-16-38"></a><span class="w">    </span><span class="cp">#define auxBtn1   14  </span>
<a id="__codelineno-16-39" name="__codelineno-16-39" href="#__codelineno-16-39"></a>
<a id="__codelineno-16-40" name="__codelineno-16-40" href="#__codelineno-16-40"></a><span class="w">    </span><span class="c1">//driver</span>
<a id="__codelineno-16-41" name="__codelineno-16-41" href="#__codelineno-16-41"></a><span class="w">    </span><span class="cp">#define uh16      16</span>
<a id="__codelineno-16-42" name="__codelineno-16-42" href="#__codelineno-16-42"></a><span class="w">    </span><span class="cp">#define ul17      17</span>
<a id="__codelineno-16-43" name="__codelineno-16-43" href="#__codelineno-16-43"></a><span class="w">    </span><span class="cp">#define vh18      18</span>
<a id="__codelineno-16-44" name="__codelineno-16-44" href="#__codelineno-16-44"></a><span class="w">    </span><span class="cp">#define wh19      19</span>
<a id="__codelineno-16-45" name="__codelineno-16-45" href="#__codelineno-16-45"></a><span class="w">    </span><span class="cp">#define vl23      23</span>
<a id="__codelineno-16-46" name="__codelineno-16-46" href="#__codelineno-16-46"></a><span class="w">    </span><span class="cp">#define wl33      33</span>
<a id="__codelineno-16-47" name="__codelineno-16-47" href="#__codelineno-16-47"></a><span class="w">    </span><span class="cp">#define curSense  32</span>
<a id="__codelineno-16-48" name="__codelineno-16-48" href="#__codelineno-16-48"></a>
<a id="__codelineno-16-49" name="__codelineno-16-49" href="#__codelineno-16-49"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-16-50" name="__codelineno-16-50" href="#__codelineno-16-50"></a>
<a id="__codelineno-16-51" name="__codelineno-16-51" href="#__codelineno-16-51"></a><span class="w">    </span><span class="c1">//motor driver</span>
<a id="__codelineno-16-52" name="__codelineno-16-52" href="#__codelineno-16-52"></a><span class="w">    </span><span class="n">BLDCMotor</span><span class="w"> </span><span class="n">motor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCMotor</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<a id="__codelineno-16-53" name="__codelineno-16-53" href="#__codelineno-16-53"></a><span class="w">    </span><span class="n">BLDCDriver6PWM</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLDCDriver6PWM</span><span class="p">(</span><span class="n">uh16</span><span class="p">,</span><span class="w"> </span><span class="n">ul17</span><span class="p">,</span><span class="w"> </span><span class="n">vh18</span><span class="p">,</span><span class="w"> </span><span class="n">vl23</span><span class="p">,</span><span class="w"> </span><span class="n">wh19</span><span class="p">,</span><span class="w"> </span><span class="n">wl33</span><span class="p">,</span><span class="w">  </span><span class="n">curSense</span><span class="p">);</span>
<a id="__codelineno-16-54" name="__codelineno-16-54" href="#__codelineno-16-54"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<a id="__codelineno-16-55" name="__codelineno-16-55" href="#__codelineno-16-55"></a><span class="w">    </span><span class="n">Commander</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Commander</span><span class="p">(</span><span class="n">Serial</span><span class="p">);</span>
<a id="__codelineno-16-56" name="__codelineno-16-56" href="#__codelineno-16-56"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">doTarget</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cmd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">scalar</span><span class="p">(</span><span class="o">&amp;</span><span class="n">target_velocity</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-16-57" name="__codelineno-16-57" href="#__codelineno-16-57"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">doLimit</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cmd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">scalar</span><span class="p">(</span><span class="o">&amp;</span><span class="n">motor</span><span class="p">.</span><span class="n">voltage_limit</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-16-58" name="__codelineno-16-58" href="#__codelineno-16-58"></a>
<a id="__codelineno-16-59" name="__codelineno-16-59" href="#__codelineno-16-59"></a><span class="w">    </span><span class="c1">//////////////////////motor demo stuff///////////////////////////</span>
<a id="__codelineno-16-60" name="__codelineno-16-60" href="#__codelineno-16-60"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">Button</span><span class="p">{</span>
<a id="__codelineno-16-61" name="__codelineno-16-61" href="#__codelineno-16-61"></a><span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">PIN</span><span class="p">;</span>
<a id="__codelineno-16-62" name="__codelineno-16-62" href="#__codelineno-16-62"></a><span class="w">      </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">numberKeyPresses</span><span class="p">;</span>
<a id="__codelineno-16-63" name="__codelineno-16-63" href="#__codelineno-16-63"></a><span class="w">      </span><span class="kt">bool</span><span class="w"> </span><span class="n">pressed</span><span class="p">;</span>
<a id="__codelineno-16-64" name="__codelineno-16-64" href="#__codelineno-16-64"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-16-65" name="__codelineno-16-65" href="#__codelineno-16-65"></a><span class="w">    </span><span class="n">Button</span><span class="w"> </span><span class="n">aux1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">auxBtn1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">};</span>
<a id="__codelineno-16-66" name="__codelineno-16-66" href="#__codelineno-16-66"></a><span class="w">    </span><span class="n">Button</span><span class="w"> </span><span class="n">aux2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">auxBtn2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">};</span>
<a id="__codelineno-16-67" name="__codelineno-16-67" href="#__codelineno-16-67"></a>
<a id="__codelineno-16-68" name="__codelineno-16-68" href="#__codelineno-16-68"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">IRAM_ATTR</span><span class="w"> </span><span class="nf">isr1</span><span class="p">(){</span>
<a id="__codelineno-16-69" name="__codelineno-16-69" href="#__codelineno-16-69"></a><span class="w">      </span><span class="n">aux1</span><span class="p">.</span><span class="n">pressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-16-70" name="__codelineno-16-70" href="#__codelineno-16-70"></a><span class="w">      </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target_velocity</span><span class="o">*</span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span>
<a id="__codelineno-16-71" name="__codelineno-16-71" href="#__codelineno-16-71"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Changing directions.. &quot;</span><span class="p">);</span>
<a id="__codelineno-16-72" name="__codelineno-16-72" href="#__codelineno-16-72"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-73" name="__codelineno-16-73" href="#__codelineno-16-73"></a>
<a id="__codelineno-16-74" name="__codelineno-16-74" href="#__codelineno-16-74"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">IRAM_ATTR</span><span class="w"> </span><span class="nf">isr2</span><span class="p">(){</span>
<a id="__codelineno-16-75" name="__codelineno-16-75" href="#__codelineno-16-75"></a><span class="w">      </span><span class="n">aux2</span><span class="p">.</span><span class="n">numberKeyPresses</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-16-76" name="__codelineno-16-76" href="#__codelineno-16-76"></a><span class="w">      </span><span class="n">aux2</span><span class="p">.</span><span class="n">pressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-16-77" name="__codelineno-16-77" href="#__codelineno-16-77"></a>
<a id="__codelineno-16-78" name="__codelineno-16-78" href="#__codelineno-16-78"></a><span class="w">      </span><span class="k">if</span><span class="p">((</span><span class="n">aux2</span><span class="p">.</span><span class="n">numberKeyPresses</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-16-79" name="__codelineno-16-79" href="#__codelineno-16-79"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-16-80" name="__codelineno-16-80" href="#__codelineno-16-80"></a><span class="hll"><span class="w">        </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><a id="__codelineno-16-81" name="__codelineno-16-81" href="#__codelineno-16-81"></a><span class="hll"><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Stopping motor.. &quot;</span><span class="p">);</span>
</span><a id="__codelineno-16-82" name="__codelineno-16-82" href="#__codelineno-16-82"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-16-83" name="__codelineno-16-83" href="#__codelineno-16-83"></a><span class="w">      </span><span class="k">else</span>
<a id="__codelineno-16-84" name="__codelineno-16-84" href="#__codelineno-16-84"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-16-85" name="__codelineno-16-85" href="#__codelineno-16-85"></a><span class="w">        </span><span class="n">target_velocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-16-86" name="__codelineno-16-86" href="#__codelineno-16-86"></a><span class="w">        </span><span class="n">motor</span><span class="p">.</span><span class="n">enable</span><span class="p">();</span>
<a id="__codelineno-16-87" name="__codelineno-16-87" href="#__codelineno-16-87"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Starting motor.. &quot;</span><span class="p">);</span>
<a id="__codelineno-16-88" name="__codelineno-16-88" href="#__codelineno-16-88"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-16-89" name="__codelineno-16-89" href="#__codelineno-16-89"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-90" name="__codelineno-16-90" href="#__codelineno-16-90"></a>
<a id="__codelineno-16-91" name="__codelineno-16-91" href="#__codelineno-16-91"></a>
<a id="__codelineno-16-92" name="__codelineno-16-92" href="#__codelineno-16-92"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-93" name="__codelineno-16-93" href="#__codelineno-16-93"></a>
<a id="__codelineno-16-94" name="__codelineno-16-94" href="#__codelineno-16-94"></a><span class="w">      </span><span class="c1">//motor demo stuff</span>
<a id="__codelineno-16-95" name="__codelineno-16-95" href="#__codelineno-16-95"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">voltage_power_supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.3</span><span class="p">;</span>
<a id="__codelineno-16-96" name="__codelineno-16-96" href="#__codelineno-16-96"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">pwm_frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20000</span><span class="p">;</span>
<a id="__codelineno-16-97" name="__codelineno-16-97" href="#__codelineno-16-97"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">voltage_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<a id="__codelineno-16-98" name="__codelineno-16-98" href="#__codelineno-16-98"></a><span class="w">      </span><span class="n">driver</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-16-99" name="__codelineno-16-99" href="#__codelineno-16-99"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">linkDriver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">driver</span><span class="p">);</span>
<a id="__codelineno-16-100" name="__codelineno-16-100" href="#__codelineno-16-100"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">voltage_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<a id="__codelineno-16-101" name="__codelineno-16-101" href="#__codelineno-16-101"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MotionControlType</span><span class="o">::</span><span class="n">velocity_openloop</span><span class="p">;</span>
<a id="__codelineno-16-102" name="__codelineno-16-102" href="#__codelineno-16-102"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<a id="__codelineno-16-103" name="__codelineno-16-103" href="#__codelineno-16-103"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">disable</span><span class="p">();</span>
<a id="__codelineno-16-104" name="__codelineno-16-104" href="#__codelineno-16-104"></a><span class="w">      </span><span class="n">pinMode</span><span class="p">(</span><span class="n">aux1</span><span class="p">.</span><span class="n">PIN</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// Sets pin 14 on the ESP32 as an interrupt</span>
<a id="__codelineno-16-105" name="__codelineno-16-105" href="#__codelineno-16-105"></a><span class="w">      </span><span class="n">attachInterrupt</span><span class="p">(</span><span class="n">aux1</span><span class="p">.</span><span class="n">PIN</span><span class="p">,</span><span class="w"> </span><span class="n">isr1</span><span class="p">,</span><span class="w"> </span><span class="n">FALLING</span><span class="p">);</span><span class="w"> </span><span class="c1">// Triggers when aux1 is pulled to GND (button pressed)</span>
<a id="__codelineno-16-106" name="__codelineno-16-106" href="#__codelineno-16-106"></a><span class="w">      </span><span class="n">pinMode</span><span class="p">(</span><span class="n">aux2</span><span class="p">.</span><span class="n">PIN</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// Sets pin 13 on the ESP32 as an interrupt</span>
<a id="__codelineno-16-107" name="__codelineno-16-107" href="#__codelineno-16-107"></a><span class="w">      </span><span class="n">attachInterrupt</span><span class="p">(</span><span class="n">aux2</span><span class="p">.</span><span class="n">PIN</span><span class="p">,</span><span class="w"> </span><span class="n">isr2</span><span class="p">,</span><span class="w"> </span><span class="n">FALLING</span><span class="p">);</span><span class="w"> </span><span class="c1">// Triggers when aux2 is pulled to GND (button pressed)</span>
<a id="__codelineno-16-108" name="__codelineno-16-108" href="#__codelineno-16-108"></a><span class="w">      </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-16-109" name="__codelineno-16-109" href="#__codelineno-16-109"></a>
<a id="__codelineno-16-110" name="__codelineno-16-110" href="#__codelineno-16-110"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<a id="__codelineno-16-111" name="__codelineno-16-111" href="#__codelineno-16-111"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-112" name="__codelineno-16-112" href="#__codelineno-16-112"></a>
<a id="__codelineno-16-113" name="__codelineno-16-113" href="#__codelineno-16-113"></a><span class="w">    </span><span class="c1">/////////////////////////////////////////////////////////////////////////</span>
<a id="__codelineno-16-114" name="__codelineno-16-114" href="#__codelineno-16-114"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-16-115" name="__codelineno-16-115" href="#__codelineno-16-115"></a>
<a id="__codelineno-16-116" name="__codelineno-16-116" href="#__codelineno-16-116"></a><span class="w">      </span><span class="c1">// Button Press ISR</span>
<a id="__codelineno-16-117" name="__codelineno-16-117" href="#__codelineno-16-117"></a><span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">aux1</span><span class="p">.</span><span class="n">pressed</span><span class="p">){</span><span class="w"> </span>
<a id="__codelineno-16-118" name="__codelineno-16-118" href="#__codelineno-16-118"></a><span class="w">        </span><span class="n">aux1</span><span class="p">.</span><span class="n">pressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-16-119" name="__codelineno-16-119" href="#__codelineno-16-119"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-16-120" name="__codelineno-16-120" href="#__codelineno-16-120"></a>
<a id="__codelineno-16-121" name="__codelineno-16-121" href="#__codelineno-16-121"></a><span class="w">      </span><span class="c1">// Turning motor on and off</span>
<a id="__codelineno-16-122" name="__codelineno-16-122" href="#__codelineno-16-122"></a><span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">aux2</span><span class="p">.</span><span class="n">pressed</span><span class="p">){</span><span class="w"> </span>
<a id="__codelineno-16-123" name="__codelineno-16-123" href="#__codelineno-16-123"></a><span class="w">        </span><span class="n">aux2</span><span class="p">.</span><span class="n">pressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-16-124" name="__codelineno-16-124" href="#__codelineno-16-124"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-16-125" name="__codelineno-16-125" href="#__codelineno-16-125"></a>
<a id="__codelineno-16-126" name="__codelineno-16-126" href="#__codelineno-16-126"></a><span class="w">      </span><span class="c1">// open loop velocity movement</span>
<a id="__codelineno-16-127" name="__codelineno-16-127" href="#__codelineno-16-127"></a><span class="w">      </span><span class="c1">// using motor.voltage_limit and motor.velocity_limit</span>
<a id="__codelineno-16-128" name="__codelineno-16-128" href="#__codelineno-16-128"></a><span class="w">      </span><span class="c1">// Basic motor movement</span>
<a id="__codelineno-16-129" name="__codelineno-16-129" href="#__codelineno-16-129"></a><span class="w">      </span><span class="n">motor</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">target_velocity</span><span class="p">);</span>
<a id="__codelineno-16-130" name="__codelineno-16-130" href="#__codelineno-16-130"></a>
<a id="__codelineno-16-131" name="__codelineno-16-131" href="#__codelineno-16-131"></a><span class="w">      </span><span class="c1">// user communication</span>
<a id="__codelineno-16-132" name="__codelineno-16-132" href="#__codelineno-16-132"></a><span class="w">      </span><span class="n">command</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
<a id="__codelineno-16-133" name="__codelineno-16-133" href="#__codelineno-16-133"></a>
<a id="__codelineno-16-134" name="__codelineno-16-134" href="#__codelineno-16-134"></a><span class="w">      </span><span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-16-135" name="__codelineno-16-135" href="#__codelineno-16-135"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div>
</details>
</div>
<h1 id="troubleshooting-tips">Troubleshooting Tips<a class="headerlink" href="#troubleshooting-tips" title="Permanent link"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Need Help?</p>
<p>If you need technical assistance or more information on a product that is not working as you expected, we recommend heading on over to the <a href="https://www.sparkfun.com/technical_assistanc">SparkFun Technical Assistance</a> page for some initial troubleshooting.</p>
<p><center>
<a class="md-button md-button--primary" href="https://www.sparkfun.com/technical_assistance">SparkFun Technical Assistance Page</a>
</center></p>
<p>If you can't find what you need there, the <a href="https://forum.sparkfun.com/index.php">SparkFun Forums</a> is a great place to search product forums and ask questions.</p>
<div class="admonition info">
<p class="admonition-title">Account Registration Required</p>
<p>If this is your first visit to our forum, you'll need to create a <a href="https://forum.sparkfun.com/ucp.php?mode=register">Forum Account</a> to post questions.</p>
</div>
</div>
<h2 id="esp32-compile-error">ESP32 Compile Error<a class="headerlink" href="#esp32-compile-error" title="Permanent link"></a></h2>
<p>If users run into an error similar to, <code>fatal error: soc/soc_caps.h: No such file or directory</code>, it may be due to an issue with the version of the ESP32 Arduino core that is installed in the <strong>Boards Manager</strong>. Users should make sure the have the latest version of the ESP32 Arduino core installed; or at least a version later than <code>v2.0.1</code>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more information, please reference this <a href="https://community.simplefoc.com/t/compilation-error/1700">forum post</a> for the Simple FOC Arduino library.</p>
</div>
<h1 id="resources">Resources:<a class="headerlink" href="#resources" title="Permanent link"></a></h1>
<h2 id="product-resources">Product Resources<a class="headerlink" href="#product-resources" title="Permanent link"></a></h2>
<ul>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg></span> <a href="https://www.sparkfun.com/products/22132">Product Page</a></li>
<li>Component Documentation<ul>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z"/></svg></span> <a href="../assets/component_documentation/esp32-wroom-32e_datasheet_en.pdf">ESP32 Module Datasheet</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z"/></svg></span> <a href="../assets/component_documentation/TMC6300.pdf">TMC6300 Datasheet</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z"/></svg></span> <a href="../assets/component_documentation/TMAG5273.pdf">TMAG5273 Datasheet</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z"/></svg></span> <a href="../assets/component_documentation/INA240.pdf">INA240 Datasheet</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z"/></svg></span> <a href="../assets/component_documentation/WS2812.pdf">WS2812 Datasheet</a></li>
</ul>
</li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h8.08a7 7 0 0 1-.08-1 7 7 0 0 1 7-7 7 7 0 0 1 3 .69V8a2 2 0 0 0-2-2h-8l-2-2H4m14 10a.26.26 0 0 0-.26.21l-.19 1.32c-.3.13-.59.29-.85.47l-1.24-.5c-.11 0-.24 0-.31.13l-1 1.73c-.06.11-.04.24.06.32l1.06.82a4.193 4.193 0 0 0 0 1l-1.06.82a.26.26 0 0 0-.06.32l1 1.73c.06.13.19.13.31.13l1.24-.5c.26.18.54.35.85.47l.19 1.32c.02.12.12.21.26.21h2c.11 0 .22-.09.24-.21l.19-1.32c.3-.13.57-.29.84-.47l1.23.5c.13 0 .26 0 .33-.13l1-1.73a.26.26 0 0 0-.06-.32l-1.07-.82c.02-.17.04-.33.04-.5 0-.17-.01-.33-.04-.5l1.06-.82a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.13-.19-.13-.32-.13l-1.23.5c-.27-.18-.54-.35-.85-.47l-.19-1.32A.236.236 0 0 0 20 14h-2m1 3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5c-.84 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5Z"/></svg></span> Design Files:<ul>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z"/></svg></span> <a href="../assets/board_files/dimensions.pdf">Board Dimensions</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z"/></svg></span> <a href="../assets/board_files/schematic.pdf">Schematic</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-2 6h-2v2h2v2h-2v2h-2v-2h2v-2h-2v-2h2v-2h-2V8h2v2h2v2Z"/></svg></span> <a href="../assets/board_files/eagle_files.zip">Eagle Files</a></li>
</ul>
</li>
<li>Arduino Library:<ul>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span> <a href="https://github.com/simplefoc/Arduino-FOC">Simple FOC</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 4v18h16v2H4c-1.1 0-2-.9-2-2V4h2m11 3h5.5L15 1.5V7M8 0h8l6 6v12c0 1.11-.89 2-2 2H8a2 2 0 0 1-2-2V2c0-1.11.89-2 2-2m9 16v-2H8v2h9m3-4v-2H8v2h12Z"/></svg></span> <a href="https://docs.simplefoc.com/">Documentation</a><ul>
<li><a href="https://docs.simplefoc.com/library_download">Installation</a></li>
<li><a href="https://docs.simplefoc.com/supported_hardware">Supported Hardware</a></li>
<li><a href="https://docs.simplefoc.com/code">Code Overview</a></li>
</ul>
</li>
</ul>
</li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m10 15 5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73Z"/></svg></span> <a href="https://youtu.be/4GGIxnUDrU0">SFE Product Showcase</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg></span> <a href="https://github.com/sparkfun/SparkFun_IoT_Brushless_Motor_Driver">Hardware Repo</a></li>
</ul>
<h3 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link"></a></h3>
<ul>
<li><a href="https://www.sparkfun.com/categories/178">Motors and Motor Driver Product Category</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12A2.5 2.5 0 0 0 19 9.5 2.5 2.5 0 0 0 16.5 7 2.5 2.5 0 0 0 14 9.5a2.5 2.5 0 0 0 2.5 2.5M9 11a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75M9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13Z"/></svg></span> <a href="https://www.sparkfun.com/technical_assistance">SparkFun Technical Assistance</a></li>
</ul>
<h2 id="manufacturers-resources">🏭&nbsp;Manufacturer's Resources<a class="headerlink" href="#manufacturers-resources" title="Permanent link"></a></h2>
<p>Analog Devices + Trinamic also provides great resources for the TMC6300 motor driver:</p>
<ul>
<li><a href="https://www.trinamic.com/products/integrated-circuits/details/tmc6300-la/">TMC6300 Product Page</a><ul>
<li><a href="https://www.trinamic.com/products/integrated-circuits/details/tmc6300-la/#block-diagram">Block Diagram/Pinout</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m9 16v-2H6v2h9m3-4v-2H6v2h12Z"/></svg></span> <a href="https://www.trinamic.com/products/integrated-circuits/details/tmc6300-la/#downloads-2">Datasheet</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 4v18h16v2H4c-1.1 0-2-.9-2-2V4h2m11 3h5.5L15 1.5V7M8 0h8l6 6v12c0 1.11-.89 2-2 2H8a2 2 0 0 1-2-2V2c0-1.11.89-2 2-2m9 16v-2H8v2h9m3-4v-2H8v2h12Z"/></svg></span> <a href="https://www.trinamic.com/products/integrated-circuits/details/tmc6300-la/#downloads-1">Application Notes</a></li>
</ul>
</li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m10 15 5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73Z"/></svg></span> <a href="https://youtu.be/WCvQjW1gSNY">Trinamic: TMC6300 Product Training Module</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 3C9.23 3 6.19 5.95 6 9.66l-1.92 2.53c-.24.31 0 .81.42.81H6v3c0 1.11.89 2 2 2h1v3h7v-4.69c2.37-1.12 4-3.51 4-6.31 0-3.86-3.12-7-7-7m1 11h-2v-2h2v2m1.75-5.19c-.29.4-.66.69-1.11.93-.25.16-.42.33-.51.52-.09.18-.13.43-.13.74h-2c0-.5.11-.92.31-1.18.19-.27.54-.57 1.05-.91.26-.16.47-.36.61-.59.16-.23.23-.5.23-.82 0-.3-.08-.56-.26-.75-.18-.18-.44-.28-.75-.28a1 1 0 0 0-.66.23c-.18.16-.27.39-.28.69h-1.93l-.01-.03c-.01-.79.25-1.36.77-1.77.54-.39 1.24-.59 2.11-.59.93 0 1.66.23 2.19.68.54.45.81 1.06.81 1.82 0 .5-.15.91-.44 1.31Z"/></svg></span> <a href="https://www.trinamic.com/support/technical-support/">Technical Support Page</a></li>
</ul>
<p><center>
<img alt="QR code to the hookup guide" class="qr" src="../assets/img/qr_code/hookup_guide.png" />
</center></p>
<h2 id="background-resources">Background Resources<a class="headerlink" href="#background-resources" title="Permanent link"></a></h2>
<p>Below, are several articles, application notes, and other technical resources on 3-phase motors and utilizing a field-oriented control (FOC) scheme:</p>
<ul>
<li>Microchip Technology<ul>
<li><a href="https://ww1.microchip.com/downloads/en/appnotes/00885a.pdf">AN885: Brushless DC (BLDC) Motor Fundamentals</a></li>
<li><a href="https://ww1.microchip.com/downloads/en/Appnotes/Sensored-Encoder-Based%29-Field-Oriented-Control-of-Three-Phase-%20Permanent-%20Magnet-%20Synchronous-DS00002757A.pdf">AN2757: Sensored (Encoder-Based) Field-Oriented Control of Three-Phase Permanent Magnet Synchronous Motor (PMSM)</a></li>
<li><a href="https://www.eeweb.com/wp-content/uploads/articles-app-notes-files-sensorless-field-oriented-control-of-a-pmsm-1340055193.pdf">AN1078: Sensorless Field-Oriented Control of a PMSM</a></li>
<li><a href="https://ww1.microchip.com/downloads/en/Appnotes/doc32126.pdf">AVR32723: Sensor Field-Oriented Control for Brushless DC motors with AT32UC3B0256</a></li>
</ul>
</li>
<li>Diodes Incorporated<ul>
<li><a href="https://www.diodes.com/assets/Uploads/AN1164-BLDC-Motors.pdf">AN1164: Introduction to Brushless DC Motors</a></li>
</ul>
</li>
<li>Monolithic Power Systems<ul>
<li><a href="https://www.monolithicpower.com/media/document/Brushless_DC_Motor_Fundamentals.pdf">AN047: Brushless DC Motor Fundamentals</a></li>
</ul>
</li>
<li>Texas Instruments<ul>
<li><a href="https://www.ti.com/lit/ml/slyp711/slyp711.pdf">Demystifying BLDC motor commutation: Trap, Sine, &amp; FOC</a></li>
<li><a href="https://www.ti.com/lit/an/sprabq2/sprabq2.pdf">Sensored Field-Oriented Control of 3-Phase Permanent Magnet Synchronous Motors</a></li>
<li><a href="https://www.ti.com/lit/an/sprabq3/sprabq3.pdf">Sensorless Field-Oriented Control of 3-Phase Permanent Magnet Synchronous Motors</a></li>
<li><a href="https://www.ti.com/lit/an/slvaes1a/slvaes1a.pdf">Brushless-DC Motor Driver Considerations and Selection Guide</a></li>
<li><a href="https://www.ti.com/lit/an/sprt703/sprt703.pdf">High-Performance Brushless DC Motor Control</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m18 16-4-3.2V16H6V8h8v3.2L18 8m2-4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"/></svg></span>&nbsp;<a href="https://www.ti.com/video/3881563245001">Field-oriented control of permanent magnet synchronous motors</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m18 16-4-3.2V16H6V8h8v3.2L18 8m2-4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"/></svg></span>&nbsp;<a href="https://www.ti.com/video/3871706529001">Field-Oriented Control of Permanent Magnet Motors</a><ul>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m10 15 5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73Z"/></svg></span>&nbsp;<a href="https://www.youtube.com/watch?v=cdiZUszYLiA">Field-Oriented Control of Permanent Magnet Motors</a></li>
</ul>
</li>
</ul>
</li>
<li>MATLAB<ul>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m10 15 5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73Z"/></svg></span>&nbsp;<a href="https://youtu.be/YPD1_rcXBIE">Motor Control, Part 4: Understanding Field-Oriented Control</a></li>
</ul>
</li>
<li>Analog Devices + Trinamic<ul>
<li><a href="https://www.trinamic.com/technology/motor-control-technology/field-oriented-control/">FOC As Hardware Building Block</a></li>
</ul>
</li>
<li>Infineon Technologies<ul>
<li><a href="https://www.infineon.com/dgdl/Infineon-motorcontrol_handbook-AdditionalTechnicalInformation-v01_00-EN.pdf?fileId=5546d4626bb628d7016be6a9aa637e69">Motor Handbook</a></li>
<li><a href="https://www.infineon.com/dgdl/Infineon-AN204469_FM3_Family_3_Phase_PMSM_FOC_Control-ApplicationNotes-v03_00-EN.pdf?fileId=8ac78c8c7cdc391c017d0d24236b6205">AN204469 - FM3 Family 3-Phase PMSM FOC Control</a></li>
<li><a href="https://www.infineon.com/dgdl/Infineon-Motor_power_tool_Block_Commutation_vs_FOC-ApplicationNotes-v01_00-EN.pdf?fileId=5546d4626eab8fbf016ed37fee474a65">Block commutation vs. FOC in power tool motor control</a></li>
<li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 3h8a2 2 0 0 1 2-2 2 2 0 0 1 2 2h8v2h-1v11h-5.75L17 22h-2l-1.75-6h-2.5L9 22H7l1.75-6H3V5H2V3m3 2v9h14V5H5m6.85 6.85a.49.49 0 0 1-.35.15.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5c.14 0 .26.06.35.15l1.4 1.39c.32.32.64.64.64.96 0 .32-.32.64-.64.96l-1.4 1.39Z"/></svg></span>&nbsp;<a href="https://www.infineon.com/cms/media/eLearning/PSS/PSS_eLearning_Motor_control_for_BLDC_in_low_voltage_drives_english/?redirId=199119">Motor control for BLDC: block commutation vs. field-oriented control</a></li>
</ul>
</li>
<li>ST Microelectronics<ul>
<li><a href="https://www.st.com/resource/en/application_note/an5397-current-sensing-in-motion-control-applications-stmicroelectronics.pdf">AN5397: Current Sensing in Motion Control Applications</a></li>
<li><a href="https://www.st.com/resource/en/application_note/an4220-sensorless-sixstep-bldc-commutation-stmicroelectronics.pdf">AN4220: Sensorless Six-Step BLDC Commutation</a></li>
</ul>
</li>
</ul>

  
  




  



                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2023 - <a href="https://www.sparkfun.com/" target="_blank" rel="noopener">SparkFun Electronics&#174;<br> <a href="https://goo.gl/maps/vkstCpQZW6jZMjzYA" target="_blank" rel="noopener">6333 Dry Creek Parkway, Niwot, Colorado 80503</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.sparkfun.com/products/22132" target="_blank" rel="noopener" title="www.sparkfun.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/sparkfun" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/sparkfun" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.github.com/sparkfun" target="_blank" rel="noopener" title="www.github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/SparkFun" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/sparkfun" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "content.action.edit", "navigation.footer", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.path"], "search": "../assets/javascripts/workers/search.1e90e0fb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a961bebd.min.js"></script>
      
        <script src="../javascript/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>